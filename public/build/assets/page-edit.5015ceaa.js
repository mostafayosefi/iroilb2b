import{_ as y,h as v,i as w,j as u,o as D,c as E,b as h,w as l,v as n,a as t,e as p,t as a,q as r,n as m,u as f,r as b}from"./app.c6c6a3cb.js";import{Q as $}from"./vue-quill.esm-bundler.7c8d11ac.js";/* empty css                       */const x={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":v(()=>w(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),QuillEditor:$},data(){return{error:!1,show:!0,page:{id:"",type:"page",slug:"",status:"draft",image:"",fa:{title:"",body:"",seoDescription:""},en:{title:"",body:"",seoDescription:""}}}},methods:{onChangeImage(){this.page.image=this.$refs.image.files[0]},updatePage(){if(this.page.slug!=""){this.$emit("loading"),this.error=!1,this.page.fa.body=this.$refs.myEditorFa.getHTML(),this.page.en.body=this.$refs.myEditorEn.getHTML();let e=new FormData;e.append("api_token",this.$cookies.get("user").token),e.append("id",this.page.id),e.append("type",this.page.type),e.append("slug",this.page.slug),e.append("status",this.page.status),e.append("images",this.page.image),e.append("title_fa",this.page.fa.title),e.append("title_en",this.page.en.title),e.append("body_fa",this.page.fa.body),e.append("body_en",this.page.en.body),e.append("description_fa",this.page.fa.seoDescription),e.append("description_en",this.page.en.seoDescription),u.post("/page/update",e,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{o.data.status==200&&(this.$router.push({name:"adminPages"}),this.$emit("loadingHide"))}).catch(o=>{this.$emit("loadingHide")})}else this.error=!0}},created(){u.get("/page/"+this.$route.params.id,{params:{api_token:this.$cookies.get("user").token}}).then(e=>{this.page.id=e.data.id,this.page.slug=e.data.slug,this.page.type=e.data.type,this.page.status=e.data.status,e.data.images&&(this.page.image=this.$hostname+"upload/page/"+e.data.images),this.page.fa.title=e.data.titleFa,this.page.en.title=e.data.titleEn,this.$refs.myEditorFa.setHTML(e.data.bodyFa),this.$refs.myEditorEn.setHTML(e.data.bodyEn),this.page.fa.seoDescription=e.data.seoDescriptionFa,this.page.en.seoDescription=e.data.seoDescriptionEn,this.$emit("loadingHide")}).catch(e=>{this.show=!1,this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(e,o){document.title=this.$t("edit")+" "+this.$t("page")+" | "+this.$t("adminTitlePage")}}}},k={class:"content"},V={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 mb-4 bg-white",role:"alert"},C=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),H={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},T=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),U={class:"pos intro-y grid grid-cols-12 gap-5 mt-5"},F={class:"intro-y col-span-12 lg:col-span-9"},j={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 mb-4 bg-white",role:"alert"},M=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),P={class:"box p-2"},L={class:"input-group intro-y"},B=["placeholder"],I={id:"input-group-price",class:"input-group-text pb-0",dir:"ltr"},Q={class:"post intro-y overflow-hidden box mt-5"},A={class:"post__tabs nav nav-tabs flex-col sm:flex-row bg-gray-300 dark:bg-dark-2 text-gray-600",role:"tablist"},N=["title"],S=t("i",{class:"fi fi-ir ml-2"},null,-1),O=["title"],q=t("i",{class:"fi fi-us ml-2"},null,-1),z={class:"post__content tab-content"},R={id:"content",class:"tab-pane p-5 active",role:"tabpanel"},G=["placeholder"],J=t("hr",{class:"my-4"},null,-1),K={for:"desc"},W=["placeholder"],X={id:"meta-title",role:"tabpanel",class:"tab-pane p-5"},Y=["placeholder"],Z=t("hr",{class:"my-4"},null,-1),ee={for:"desc"},te=["placeholder"],se={class:"intro-y col-span-12 lg:col-span-3 text-left"},oe={class:"box p-2 text-right"},ie={class:"bg-light-2 p-2 font-bold rounded mb-2"},ae={value:"page"},le={value:"b2bplus"},ne={value:"draft"},pe={value:"publish"},re={class:"box p-2 text-right mt-6"},de={class:"bg-light-2 p-2 font-bold rounded mb-2"},ge=["src"];function he(e,o,d,me,s,g){const _=b("header-admin"),c=b("QuillEditor");return D(),E("div",k,[h(_,{user:d.user,title:e.$t("edit")+" "+e.$t("page")},null,8,["user","title"]),l(t("div",V,[C,p(" "+a(e.$t("post-notfound")),1)],512),[[n,!s.show]]),l(t("div",H,[T,p(" "+a(e.$t("access-message")),1)],512),[[n,!d.user.role.page.edit]]),l(t("div",U,[t("div",F,[l(t("div",j,[M,p(" "+a(e.$t("error-empty-page-fields")),1)],512),[[n,s.error]]),t("div",P,[t("div",L,[l(t("input",{dir:"ltr",id:"slug",type:"text",class:"form-control text-left",placeholder:e.$t("page-slug"),"onUpdate:modelValue":o[0]||(o[0]=i=>s.page.slug=i)},null,8,B),[[r,s.page.slug]]),t("div",I,a(e.$hostname+"{language}/"+s.page.type),1)])]),t("div",Q,[t("div",A,[t("a",{title:e.$t("body"),"data-toggle":"tab","data-target":"#content",href:"javascript:;",class:"tooltip w-full sm:w-40 py-4 text-center flex justify-center items-center active",id:"content-tab",role:"tab"},[S,p(" "+a(e.$t("persian")),1)],8,N),t("a",{title:e.$t("seo-tools"),"data-toggle":"tab","data-target":"#meta-title",href:"javascript:;",class:"tooltip w-full sm:w-40 py-4 text-center flex justify-center items-center",id:"meta-title-tab",role:"tab"},[q,p(" "+a(e.$t("english")),1)],8,O)]),t("div",z,[t("div",R,[l(t("input",{type:"text",class:"form-control py-3 px-4 placeholder-theme-8 mb-4",placeholder:e.$t("title"),"onUpdate:modelValue":o[1]||(o[1]=i=>s.page.fa.title=i)},null,8,G),[[r,s.page.fa.title]]),h(c,{content:s.page.fa.body,"onUpdate:content":o[2]||(o[2]=i=>s.page.fa.body=i),theme:"snow",toolbar:"full",ref:"myEditorFa"},null,8,["content"]),J,t("label",K,a(e.$t("descriptions")+" "+e.$t("seo")),1),t("span",{class:m(["mx-2 px-2 rounded-full bg-theme-21 text-xs text-white",s.page.fa.seoDescription.length<160?"bg-theme-":"bg-theme-20"])},a(s.page.fa.seoDescription.length),3),l(t("textarea",{id:"desc",class:"form-control mt-3",rows:"3",placeholder:e.$t("descriptions")+" "+e.$t("seo"),"onUpdate:modelValue":o[3]||(o[3]=i=>s.page.fa.seoDescription=i),maxlength:"170"},`\r
                            `,8,W),[[r,s.page.fa.seoDescription]])]),t("div",X,[l(t("input",{type:"text",class:"form-control py-3 px-4 placeholder-theme-8 mb-4",placeholder:e.$t("title"),"onUpdate:modelValue":o[4]||(o[4]=i=>s.page.en.title=i)},null,8,Y),[[r,s.page.en.title]]),h(c,{content:s.page.en.body,"onUpdate:content":o[5]||(o[5]=i=>s.page.en.body=i),theme:"snow",toolbar:"full",ref:"myEditorEn"},null,8,["content"]),Z,t("label",ee,a(e.$t("descriptions")+" "+e.$t("seo")),1),t("span",{class:m(["mx-2 px-2 rounded-full bg-theme-21 text-xs text-white",s.page.en.seoDescription.length<160?"bg-theme-":"bg-theme-20"])},a(s.page.en.seoDescription.length),3),l(t("textarea",{id:"desc",class:"form-control mt-3",rows:"3",placeholder:e.$t("descriptions")+" "+e.$t("seo"),"onUpdate:modelValue":o[6]||(o[6]=i=>s.page.en.seoDescription=i),maxlength:"170"},`\r
                            `,8,te),[[r,s.page.en.seoDescription]])])])])]),t("div",se,[t("button",{class:m(["btn mb-4 btn-lg border-0",s.page.status=="publish"?"btn-green":"btn-dark"]),onClick:o[7]||(o[7]=i=>g.updatePage())},[l(t("span",null,a(e.$t("save")+" "+e.$t("draft")),513),[[n,s.page.status=="draft"]]),l(t("span",null,a(e.$t("update")),513),[[n,s.page.status=="publish"]])],2),t("div",oe,[t("p",ie,a(e.$t("setting")),1),l(t("select",{id:"lang",class:"form-control mt-2","onUpdate:modelValue":o[8]||(o[8]=i=>s.page.type=i)},[t("option",ae,a(e.$t("page")),1),t("option",le,a(e.$t("b2b-plus")),1)],512),[[f,s.page.type]]),l(t("select",{id:"lang",class:"form-control mt-2","onUpdate:modelValue":o[9]||(o[9]=i=>s.page.status=i)},[t("option",ne,a(e.$t("draft")),1),t("option",pe,a(e.$t("publish")),1)],512),[[f,s.page.status]])]),t("div",re,[t("p",de,a(e.$t("post-image")),1),t("img",{class:"rounded mb-2",src:s.page.image==null||s.page.image.name?"":s.page.image},null,8,ge),t("input",{type:"file",ref:"image",onChange:o[10]||(o[10]=(...i)=>g.onChangeImage&&g.onChangeImage(...i))},null,544)])])],512),[[n,s.show&&d.user.role.page.edit]])])}const be=y(x,[["render",he]]);export{be as default};
