import{_ as j,h as B,i as L,j as x,o as l,c as i,b as V,w as d,v as E,a as t,e as w,t as n,q as I,n as O,s as N,u as P,F as y,k as f,r as D,x as v,l as k}from"./app.c6c6a3cb.js";import{Q}from"./vue-quill.esm-bundler.7c8d11ac.js";/* empty css                       */import{s as A}from"./multiselect.d432e60a.js";/* empty css                                                         */const q={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":B(()=>L(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),QuillEditor:Q,Multiselect:A},data(){return{error:!1,show:!0,post:{title:"",slug:"",language:"",status:"draft",image:"",category:[],label:[],body:"",seoDescription:"",seoKayword:[]},multiOption:{mode:"tags",closeOnSelect:!1,searchable:!0,createOption:!0},categories:[],subCategories:[],labels:{en:[],fa:[]}}},methods:{onChangeImage(){this.post.image=this.$refs.image.files[0],console.log(this.post.image.name)},updatePost(){if(this.post.title!=""&&this.post.slug!=""){this.$emit("loading"),this.error=!1,this.post.body=this.$refs.myEditor.getHTML();let e=new FormData;e.append("api_token",this.$cookies.get("user").token),e.append("id",this.post.id),e.append("title",this.post.title),e.append("slug",this.post.slug),e.append("language",this.post.language),e.append("status",this.post.status),e.append("images",this.post.image),e.append("categories",this.post.category),e.append("labels",this.post.label),e.append("body",this.post.body),e.append("seo_description",this.post.seoDescription),e.append("seo_kaywords",this.post.seoKayword),x.post("/post/update",e,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{s.data.status==200&&(this.$router.push({name:"adminPosts"}),this.$emit("loadingHide"))}).catch(s=>{this.$emit("loadingHide")})}else this.error=!0}},created(){x.get("/category",{params:{api_token:this.$cookies.get("user").token}}).then(e=>{for(const s of e.data.cat)this.categories.push({id:s.id,slug:s.slug,titleFa:s.titleFa,titleEn:s.titleEn,descriptionFa:s.descriptionFa,descriptionEn:s.descriptionEn,child:[]});for(const s of e.data.subCat)this.subCategories.push({id:s.id,parentId:s.parentId,slug:s.slug,titleFa:s.titleFa,titleEn:s.titleEn,descriptionFa:s.descriptionFa,descriptionEn:s.descriptionEn,child:[]})}).catch(e=>{}),x.get("/label",{params:{api_token:this.$cookies.get("user").token}}).then(e=>{for(const s of e.data.data)s.lang=="en"?this.labels.en.push(s.title):this.labels.fa.push(s.title)}).catch(e=>{}),x.get("/post/"+this.$route.params.id,{params:{api_token:this.$cookies.get("user").token}}).then(e=>{this.post.id=e.data.id,this.post.title=e.data.title,this.post.slug=e.data.slug,this.post.language=e.data.language,this.post.status=e.data.status,e.data.images&&(this.post.image=this.$hostname+"upload/post/"+e.data.images),this.post.category=e.data.categories,this.post.label=e.data.labels,this.$refs.myEditor.setHTML(e.data.body),this.post.seoDescription=e.data.seoDes,this.post.seoKayword=e.data.seoKay,this.$emit("loadingHide")}).catch(e=>{this.show=!1,this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(e,s){document.title=this.$t("edit")+" "+this.$t("post")+" | "+this.$t("adminTitlePage")}}}},z={class:"content"},R={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 mb-4 bg-white",role:"alert"},G=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),J={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},W=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),X={class:"pos intro-y grid grid-cols-12 gap-5 mt-5"},Y={class:"intro-y col-span-12 lg:col-span-9"},Z={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 mb-4 bg-white",role:"alert"},$=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),C=["dir","placeholder"],S={class:"box p-2"},tt={class:"input-group intro-y"},et=["placeholder"],ot={id:"input-group-price",class:"input-group-text pb-0",dir:"ltr"},st={class:"post intro-y overflow-hidden box mt-5"},lt={class:"post__tabs nav nav-tabs flex-col sm:flex-row bg-gray-300 dark:bg-dark-2 text-gray-600",role:"tablist"},it=["title"],nt=t("i",{"data-feather":"file-text",class:"w-4 h-4 ml-2"},null,-1),rt=["title"],dt=t("i",{"data-feather":"code",class:"w-4 h-4 ml-2"},null,-1),at={class:"post__content tab-content"},pt={id:"content",class:"tab-pane p-5 active",role:"tabpanel"},ut={id:"meta-title",role:"tabpanel",class:"tab-pane p-5"},ct={for:"desc",class:"mt-3"},ht=["placeholder"],gt={class:"mt-2 mb-4"},mt={class:"intro-y col-span-12 lg:col-span-3 text-left"},_t={class:"box p-2 text-right"},yt={class:"bg-light-2 p-2 font-bold rounded mb-2"},ft={value:"fa"},vt={value:"en"},bt={value:"draft"},kt={value:"publish"},Et={class:"box p-2 text-right mt-6"},wt={class:"bg-light-2 p-2 font-bold rounded mb-2"},xt=["src"],Vt={class:"box p-2 text-right mt-6"},Ft={class:"bg-light-2 p-2 font-bold rounded mb-2"},Ut=["id","value"],It=["for"],Dt={key:0},Tt=["id","value"],Ot=["for"],Pt={key:0},Mt=["id","value"],Ht=["for"],Kt={key:0},jt=["id","value"],Bt=["for"],Lt={key:0},Nt=["id","value"],Qt=["for"],At={key:0},qt=["id","value"],zt=["for"],Rt={key:0},Gt=["id","value"],Jt=["for"],Wt={key:0},Xt=["id","value"],Yt=["for"],Zt={key:0},$t=["id","value"],Ct=["for"],St={key:0},te=["id","value"],ee=["for"],oe={class:"box p-2 text-right mt-6"},se={class:"bg-light-2 p-2 font-bold rounded mb-2"};function le(e,s,F,ie,o,U){const M=D("header-admin"),H=D("QuillEditor"),T=D("Multiselect");return l(),i("div",z,[V(M,{user:F.user,title:e.$t("edit")+" "+e.$t("post")+": "+o.post.title},null,8,["user","title"]),d(t("div",R,[G,w(" "+n(e.$t("post-notfound")),1)],512),[[E,!o.show]]),d(t("div",J,[W,w(" "+n(e.$t("access-message")),1)],512),[[E,!F.user.role.post.edit]]),d(t("div",null,[d(t("div",X,[t("div",Y,[d(t("div",Z,[$,w(" "+n(e.$t("error-empty-post-fields")),1)],512),[[E,o.error]]),d(t("input",{dir:o.post.language=="fa"?"rtl":"ltr",type:"text",class:"form-control py-3 px-4 box placeholder-theme-8 mb-4",placeholder:e.$t("title"),"onUpdate:modelValue":s[0]||(s[0]=r=>o.post.title=r)},null,8,C),[[I,o.post.title]]),t("div",S,[t("div",tt,[d(t("input",{dir:"ltr",id:"slug",type:"text",class:"form-control text-left",placeholder:e.$t("post-slug"),"onUpdate:modelValue":s[1]||(s[1]=r=>o.post.slug=r)},null,8,et),[[I,o.post.slug]]),t("div",ot,n(e.$hostname+o.post.language+"/post/"),1)])]),t("div",st,[t("div",lt,[t("a",{title:e.$t("body"),"data-toggle":"tab","data-target":"#content",href:"javascript:;",class:"tooltip w-full sm:w-40 py-4 text-center flex justify-center items-center active",id:"content-tab",role:"tab"},[nt,w(" "+n(e.$t("body")),1)],8,it),t("a",{title:e.$t("seo-tools"),"data-toggle":"tab","data-target":"#meta-title",href:"javascript:;",class:"tooltip w-full sm:w-40 py-4 text-center flex justify-center items-center",id:"meta-title-tab",role:"tab"},[dt,w(" "+n(e.$t("seo-tools")),1)],8,rt)]),t("div",at,[t("div",pt,[V(H,{content:o.post.body,"onUpdate:content":s[2]||(s[2]=r=>o.post.body=r),theme:"snow",toolbar:"full",ref:"myEditor"},null,8,["content"])]),t("div",ut,[t("label",ct,n(e.$t("descriptions")+" "+e.$t("seo")),1),t("span",{class:O(["mx-2 px-2 rounded-full bg-theme-21 text-xs text-white",o.post.seoDescription.length<160?"bg-theme-":"bg-theme-20"])},n(o.post.seoDescription.length),3),d(t("textarea",{id:"desc",class:"form-control mt-3",rows:"3",placeholder:e.$t("descriptions")+" "+e.$t("seo"),"onUpdate:modelValue":s[3]||(s[3]=r=>o.post.seoDescription=r),maxlength:"320"},`
                            `,8,ht),[[I,o.post.seoDescription]]),t("div",gt,[V(T,N({id:"kay",class:"mt-2.5 mb-3",modelValue:o.post.seoKayword,"onUpdate:modelValue":s[4]||(s[4]=r=>o.post.seoKayword=r),rtl:!0,placeholder:e.$t("insert-kaywords"),noOptionsText:e.$t("empty")},o.multiOption,{options:o.post.seoKayword}),null,16,["modelValue","placeholder","noOptionsText","options"])])])])])]),t("div",mt,[t("button",{class:O(["btn mb-4 btn-lg border-0",o.post.status=="publish"?"btn-green":"btn-dark"]),onClick:s[5]||(s[5]=r=>U.updatePost())},[d(t("span",null,n(e.$t("save")+" "+e.$t("draft")),513),[[E,o.post.status=="draft"]]),d(t("span",null,n(e.$t("update")),513),[[E,o.post.status=="publish"]])],2),t("div",_t,[t("p",yt,n(e.$t("setting")),1),d(t("select",{id:"lang",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=r=>o.post.language=r)},[t("option",ft,n(e.$t("persian")),1),t("option",vt,n(e.$t("english")),1)],512),[[P,o.post.language]]),d(t("select",{id:"lang",class:"form-control mt-2","onUpdate:modelValue":s[7]||(s[7]=r=>o.post.status=r)},[t("option",bt,n(e.$t("draft")),1),t("option",kt,n(e.$t("publish")),1)],512),[[P,o.post.status]])]),t("div",Et,[t("p",wt,n(e.$t("post-image")),1),t("img",{class:"rounded mb-2",src:o.post.image==null||o.post.image.name?"":o.post.image},null,8,xt),t("input",{type:"file",ref:"image",onChange:s[8]||(s[8]=(...r)=>U.onChangeImage&&U.onChangeImage(...r))},null,544)]),t("div",Vt,[t("p",Ft,n(e.$t("categories")),1),(l(!0),i(y,null,f(o.categories,r=>(l(),i("ul",{key:r.id,class:"label"},[t("li",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[9]||(s[9]=a=>o.post.category=a),id:r.titleEn,value:r.id},null,8,Ut),[[v,o.post.category]]),t("label",{for:r.titleEn},n(r.titleFa+" ("+r.titleEn+") "),9,It),(l(!0),i(y,null,f(o.subCategories,a=>(l(),i("ul",{key:a.id,class:"ul"},[a.parentId==r.id?(l(),i("li",Dt,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[10]||(s[10]=p=>o.post.category=p),id:a.titleEn,value:a.id},null,8,Tt),[[v,o.post.category]]),t("label",{for:a.titleEn},n(a.titleFa+" ("+a.titleEn+") "),9,Ot),(l(!0),i(y,null,f(o.subCategories,p=>(l(),i("ul",{key:p.id,class:"ul"},[p.parentId==a.id?(l(),i("li",Pt,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[11]||(s[11]=u=>o.post.category=u),id:p.titleEn,value:p.id},null,8,Mt),[[v,o.post.category]]),t("label",{for:p.titleEn},n(p.titleFa+" ("+p.titleEn+") "),9,Ht),(l(!0),i(y,null,f(o.subCategories,u=>(l(),i("ul",{key:u.id,class:"ul"},[u.parentId==p.id?(l(),i("li",Kt,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[12]||(s[12]=c=>o.post.category=c),id:u.titleEn,value:u.id},null,8,jt),[[v,o.post.category]]),t("label",{for:u.titleEn},n(u.titleFa+" ("+u.titleEn+") "),9,Bt),(l(!0),i(y,null,f(o.subCategories,c=>(l(),i("ul",{key:c.id,class:"ul"},[c.parentId==u.id?(l(),i("li",Lt,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[13]||(s[13]=h=>o.post.category=h),id:c.titleEn,value:c.id},null,8,Nt),[[v,o.post.category]]),t("label",{for:c.titleEn},n(c.titleFa+" ("+c.titleEn+") "),9,Qt),(l(!0),i(y,null,f(o.subCategories,h=>(l(),i("ul",{key:h.id,class:"ul"},[h.parentId==c.id?(l(),i("li",At,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[14]||(s[14]=g=>o.post.category=g),id:h.titleEn,value:h.id},null,8,qt),[[v,o.post.category]]),t("label",{for:h.titleEn},n(h.titleFa+" ("+h.titleEn+") "),9,zt),(l(!0),i(y,null,f(o.subCategories,g=>(l(),i("ul",{key:g.id,class:"ul"},[g.parentId==h.id?(l(),i("li",Rt,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[15]||(s[15]=m=>o.post.category=m),id:g.titleEn,value:g.id},null,8,Gt),[[v,o.post.category]]),t("label",{for:g.titleEn},n(g.titleFa+" ("+g.titleEn+") "),9,Jt),(l(!0),i(y,null,f(o.subCategories,m=>(l(),i("ul",{key:m.id,class:"ul"},[m.parentId==g.id?(l(),i("li",Wt,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[16]||(s[16]=_=>o.post.category=_),id:m.titleEn,value:m.id},null,8,Xt),[[v,o.post.category]]),t("label",{for:m.titleEn},n(m.titleFa+" ("+m.titleEn+") "),9,Yt),(l(!0),i(y,null,f(o.subCategories,_=>(l(),i("ul",{key:_.id,class:"ul"},[_.parentId==m.id?(l(),i("li",Zt,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[17]||(s[17]=b=>o.post.category=b),id:_.titleEn,value:_.id},null,8,$t),[[v,o.post.category]]),t("label",{for:_.titleEn},n(_.titleFa+" ("+_.titleEn+") "),9,Ct),(l(!0),i(y,null,f(o.subCategories,b=>(l(),i("ul",{key:b.id,class:"ul"},[b.parentId==_.id?(l(),i("li",St,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[18]||(s[18]=K=>o.post.category=K),id:b.titleEn,value:b.id},null,8,te),[[v,o.post.category]]),t("label",{for:b.titleEn},n(b.titleFa+" ("+b.titleEn+") "),9,ee)])):k("",!0)]))),128))])):k("",!0)]))),128))])):k("",!0)]))),128))])):k("",!0)]))),128))])):k("",!0)]))),128))])):k("",!0)]))),128))])):k("",!0)]))),128))])):k("",!0)]))),128))])):k("",!0)]))),128))])]))),128))]),t("div",oe,[t("p",se,n(e.$t("labels")),1),V(T,{id:"kay",class:"mt-2.5 mb-3",modelValue:o.post.label,"onUpdate:modelValue":s[19]||(s[19]=r=>o.post.label=r),rtl:!0,placeholder:e.$t("insert-kaywords"),noOptionsText:e.$t("empty"),mode:"tags",searchable:!0,options:o.post.language=="en"?o.labels.en:o.labels.fa},null,8,["modelValue","placeholder","noOptionsText","options"])])])],512),[[E,o.show]])],512),[[E,F.user.role.post.edit]])])}const ue=j(q,[["render",le]]);export{ue as default};
