import{_ as k,h as w,i as $,V as y,j as a,o as u,c as m,a as e,b as p,w as d,v as l,e as _,t as i,d as x,m as f,q as c,F as L,r as g,l as V}from"./app.c6c6a3cb.js";const C={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":w(()=>$(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),VueGoodTable:y},data(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),loading:!0,redirect:{link:"",to:"",code:""},sendLoad:!1,successState:!1,error:!1,columns:[{label:this.$t("link"),field:"link"},{label:this.$t("to"),field:"to"},{label:this.$t("redirect-type"),field:"code"},{label:this.$t("the-operation"),field:"after"}],redirects:[]}},methods:{addRedirect(){if(this.redirect.link!=""&&this.redirect.to!=""&&this.redirect.code!=""){this.sendLoad=!0,this.error=!1;const t={api_token:this.$cookies.get("user").token,link:"/"+this.redirect.link,to:this.redirect.to,code:this.redirect.code};a.post("/redirect/create",t).then(s=>{s.data=="success"&&(this.redirect.link="",this.redirect.to="",this.redirect.code="",this.successState=!0,this.sendLoad=!1,setTimeout(()=>this.successState=!1,2e3),this.$refs.toggleButton.click(),this.getAll())}).catch(()=>{this.$emit("loadingHide")})}else this.error=!0},deleteRedirect(t){confirm(this.$t("delete-message"))&&(this.$emit("loading"),a.delete("/redirect/delete/"+t,{params:{api_token:this.$cookies.get("user").token}}).then(s=>{s.data=="successfully deleted"&&(this.redirects=this.redirects.filter(r=>r.id!=t),this.$emit("loadingHide"))}).catch(()=>{this.$emit("loadingHide")}))},getAll(){this.redirects=[],a.get("/redirect",{params:{api_token:this.$cookies.get("user").token}}).then(t=>{if(t!=null)for(const s of t.data.data)this.redirects.push({id:s.id,link:s.link,to:s.redirect,code:s.status});this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})}},beforeCreate(){a.get("/redirect",{params:{api_token:this.$cookies.get("user").token}}).then(t=>{if(t!=null)for(const s of t.data.data)this.redirects.push({id:s.id,link:s.link,to:s.redirect,code:s.status});this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(t,s){document.title=this.$t("redirects")+" | "+this.$t("adminTitlePage")}}}},H={class:"content"},T={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},B=e("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),S={class:"box intro-y"},A={key:0},P=["onClick"],E=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash w-4 h-4"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),R=[E],j={id:"basic-non-sticky-notification-content",class:"toastify-content hidden flex flex-col sm:flex-row"},D={class:"font-medium"},N={id:"basic-non-sticky-notification-toggle",ref:"toggleButton",class:"d-none"},M={id:"header-footer-modal-preview",class:"modal",tabindex:"-1"},U={class:"modal-dialog modal-lg"},q={class:"modal-content"},F={class:"modal-header"},O={class:"font-medium text-left ml-auto"},G=e("input",{type:"hidden",name:"_token"},null,-1),I={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},z={class:"col-span-12 sm:col-span-12"},J={class:"input-group"},K={dir:"ltr",class:"input-group-text"},Q={dir:"ltr",class:"input-group-text"},W={class:"col-span-12 sm:col-span-12"},X={class:"input-group"},Y={class:"input-group-text"},Z={class:"col-span-12 sm:col-span-12"},ee={class:"input-group"},te={class:"input-group-text w-48"},se={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12",role:"alert"},oe=e("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),ie={class:"modal-footer justify-end flex items-center"},ne={type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-20 mx-4"},de=["disabled"],re=e("i",{"data-loading-icon":"puff",class:"w-5"},null,-1),le=[re];function ae(t,s,r,ce,o,h){const b=g("header-admin"),v=g("vue-good-table");return u(),m(L,null,[e("div",H,[p(b,{user:r.user,title:t.$t("redirects"),element:r.user.role.redirect.add,elementText:t.$t("add")},null,8,["user","title","element","elementText"]),d(e("div",T,[B,_(" "+i(t.$t("access-message")),1)],512),[[l,!r.user.role.redirect.show]]),d(e("div",S,[p(v,{class:"p-2",columns:o.columns,rows:o.redirects,rtl:!0,theme:"polar-bear","line-numbers":!0,"fixed-header":!0,"pagination-options":{enabled:!0,mode:"records",perPage:10,nextLabel:t.$t("next"),prevLabel:t.$t("prev"),rowsPerPageLabel:"",ofLabel:t.$t("of"),allLabel:t.$t("all")},"search-options":{enabled:!0,placeholder:t.$t("search")}},{"table-row":x(n=>[n.column.field=="after"?(u(),m("span",A,[d(e("button",{onClick:f(he=>h.deleteRedirect(n.row.id),["prevent"]),class:"btn btn-sm btn-outline-danger m-1"},R,8,P),[[l,r.user.role.redirect.delete]])])):V("",!0)]),_:1},8,["columns","rows","pagination-options","search-options"])],512),[[l,r.user.role.redirect.show]])]),e("div",j,[e("div",D,i(t.$t("add-success-message")),1)]),e("button",N,null,512),e("div",M,[e("div",U,[e("div",q,[e("div",F,[e("h2",O,i(t.$t("add-new-redirect")),1)]),e("form",{onSubmit:s[4]||(s[4]=f(()=>{},["prevent"]))},[G,e("div",I,[e("div",z,[e("div",J,[e("div",K,i(t.$t("link")),1),d(e("input",{dir:"ltr",type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=n=>o.redirect.link=n)},null,512),[[c,o.redirect.link]]),e("div",Q,i(t.$hostname),1)])]),e("div",W,[e("div",X,[e("div",Y,i(t.$t("to")),1),d(e("input",{dir:"ltr",type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=n=>o.redirect.to=n),placeholder:"https://google.com"},null,512),[[c,o.redirect.to]])])]),e("div",Z,[e("div",ee,[e("div",te,i(t.$t("redirect-type")),1),d(e("input",{dir:"ltr",type:"number",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=n=>o.redirect.code=n)},null,512),[[c,o.redirect.code]])])]),d(e("div",se,[oe,_(" "+i(t.$t("error-empty-fields")),1)],512),[[l,o.error]])]),e("div",ie,[e("button",ne,i(t.$t("cancel")),1),e("button",{type:"button",onClick:s[3]||(s[3]=n=>h.addRedirect()),class:"btn btn-success w-20",disabled:o.sendLoad},[d(e("div",null,i(t.$t("send")),513),[[l,!o.sendLoad]]),d(e("div",null,le,512),[[l,o.sendLoad]])],8,de)])],32)])])])],64)}const me=k(C,[["render",ae]]);export{me as default};
