import{_ as P,h as $,i as L,V as C,j as c,o as p,c as g,a as t,b as _,w as i,v as r,e as f,t as d,d as E,N as v,m as h,q as u,J as m,F as V,r as b,l as H,T as w}from"./app.c6c6a3cb.js";const F={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":$(()=>L(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),VueGoodTable:C},data(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),loading:!0,product:{nameFa:"",nameEn:"",slug:""},productId:"",sendLoad:!1,editLoad:!1,successState:!1,error:!1,columns:[{label:this.$t("name-product"),field:"fa",thClass:"product-fa"},{label:this.$t("name-product"),field:"en",thClass:"product-gb"},{label:this.$t("the-operation"),field:"after"}],products:[]}},methods:{addProduct(){if(this.product.nameFa!=""&&this.product.nameEn!=""&&this.product.slug!=""){this.sendLoad=!0,this.error=!1;const s={api_token:this.$cookies.get("user").token,product:this.product};c.post("/product/create",s).then(e=>{e.data=="success"&&(this.product.nameFa="",this.product.nameEn="",this.product.slug="",this.successState=!0,this.sendLoad=!1,setTimeout(()=>this.successState=!1,2e3),this.$refs.toggleButton.click(),this.getAll())}).catch(()=>{this.$emit("loadingHide")})}else this.error=!0},deleteProduct(s){confirm(this.$t("delete-message"))&&(this.$emit("loading"),c.delete("/product/delete/"+s,{params:{api_token:this.$cookies.get("user").token}}).then(e=>{e.data=="successfully deleted"&&(this.products=this.products.filter(a=>a.id!=s),this.$emit("loadingHide"))}).catch(()=>{this.$emit("loadingHide")}))},editProduct(s){this.editLoad=!1,this.error=!1,this.$refs.editModal.click(),c.get("/product/"+s,{params:{api_token:this.$cookies.get("user").token}}).then(e=>{this.product.nameFa=e.data.name_fa,this.product.nameEn=e.data.name_en,this.product.slug=e.data.slug,this.productId=e.data.id,this.editLoad=!0}).catch(()=>{this.$emit("loadingHide")})},updateProduct(s){if(this.product.nameFa!=""&&this.product.nameEn!=""&&this.product.slug!=""){this.$emit("loading"),this.error=!1;const e={api_token:this.$cookies.get("user").token,product:this.product};c.put("/product/update/"+s,e).then(a=>{a.data=="successfully updated"&&(this.getAll(),this.$refs.closeEditModal.click(),this.$emit("loadingHide"))}).catch(()=>{this.$emit("loadingHide")})}else this.error=!0},getAll(){this.products=[],c.get("/product",{params:{api_token:this.$cookies.get("user").token}}).then(s=>{for(const e of s.data.data)this.products.push({id:e.id,fa:e.name_fa,en:e.name_en,slug:e.slug});this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})}},beforeCreate(){c.get("/product",{params:{api_token:this.$cookies.get("user").token}}).then(s=>{for(const e of s.data.data)this.products.push({id:e.id,fa:e.name_fa,en:e.name_en,slug:e.slug});this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(s,e){document.title=this.$t("products")+" | "+this.$t("adminTitlePage")}}}},B={class:"content"},M={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},T=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),j={class:"box intro-y"},S={key:0},A=["href"],I=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye block w-4 h-4"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})],-1),U={class:"mr-2"},D=["href"],K=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye block w-4 h-4"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})],-1),N={class:"mr-2"},z=["onClick"],q=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit w-4 h-4"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),O=[q],G=["onClick"],J=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash w-4 h-4"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),R=[J],Q=t("span",{class:"fi fi-ir float-right ml-2"},null,-1),W=t("span",{class:"fi fi-us float-right ml-2"},null,-1),X={id:"basic-non-sticky-notification-content",class:"toastify-content hidden flex flex-col sm:flex-row"},Y={class:"font-medium"},Z={id:"basic-non-sticky-notification-toggle",ref:"toggleButton",class:"d-none"},tt={id:"header-footer-modal-preview",class:"modal",tabindex:"-1"},et={class:"modal-dialog"},st={class:"modal-content"},ot={class:"modal-header"},nt={class:"font-medium text-left ml-auto"},it=["value"],dt={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},lt={class:"col-span-12 sm:col-span-12"},at={class:"input-group"},rt=t("div",{id:"input-group-email",class:"input-group-text"},[t("span",{class:"fi fi-ir"})],-1),ct=["placeholder"],ut={class:"col-span-12 sm:col-span-12"},pt={class:"input-group"},ht=["placeholder"],mt=t("div",{id:"input-group-email",class:"input-group-text"},[t("span",{class:"fi fi-us"})],-1),ft={class:"col-span-12 sm:col-span-12"},gt={class:"input-group"},_t=["placeholder"],vt={id:"input-group-price",class:"input-group-text",dir:"ltr"},bt={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12",role:"alert"},wt=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),kt={class:"modal-footer justify-end flex items-center"},yt={type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-20 mx-4"},xt=["disabled"],Pt=t("i",{"data-loading-icon":"puff",class:"w-5"},null,-1),$t=[Pt],Lt={href:"javascript:;","data-toggle":"modal",ref:"editModal","data-target":"#modaledit",class:"d-none"},Ct={id:"modaledit",class:"modal",tabindex:"-1"},Et={class:"modal-dialog"},Vt={class:"modal-content"},Ht={class:"modal-header"},Ft={class:"font-medium text-left ml-auto"},Bt=["value"],Mt={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},Tt={class:"col-span-12 sm:col-span-12"},jt={class:"input-group"},St=t("div",{id:"input-group-email",class:"input-group-text"},[t("span",{class:"fi fi-ir"})],-1),At=["placeholder"],It={class:"col-span-12 sm:col-span-12"},Ut={class:"input-group"},Dt=["placeholder"],Kt=t("div",{id:"input-group-email",class:"input-group-text"},[t("span",{class:"fi fi-us"})],-1),Nt={class:"col-span-12 sm:col-span-12"},zt={class:"input-group"},qt=["placeholder"],Ot={id:"input-group-price",class:"input-group-text",dir:"ltr"},Gt={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12",role:"alert"},Jt=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),Rt={class:"modal-footer justify-end flex items-center"},Qt=["disabled"],Wt=t("i",{"data-loading-icon":"puff",class:"w-5"},null,-1),Xt=[Wt];function Yt(s,e,a,Zt,o,l){const k=b("header-admin"),y=b("vue-good-table");return p(),g(V,null,[t("div",B,[_(k,{user:a.user,title:s.$t("products"),element:a.user.role.product.add,elementText:s.$t("add")},null,8,["user","title","element","elementText"]),i(t("div",M,[T,f(" "+d(s.$t("access-message")),1)],512),[[r,!a.user.role.product.show]]),i(t("div",j,[_(y,{class:"p-2",columns:o.columns,rows:o.products,rtl:!0,theme:"polar-bear","line-numbers":!0,"fixed-header":!0,"pagination-options":{enabled:!0,mode:"records",perPage:10,nextLabel:s.$t("next"),prevLabel:s.$t("prev"),rowsPerPageLabel:"",ofLabel:s.$t("of"),allLabel:s.$t("all")},"search-options":{enabled:!0,placeholder:s.$t("search")}},{"table-row":E(n=>[n.column.field=="after"?(p(),g("span",S,[t("a",{target:"_blank",class:"btn btn-sm btn-outline-primary m-1",href:s.$hostname+"fa/filter/"+n.row.slug},[I,t("span",U,d(s.$t("persian")),1)],8,A),t("a",{target:"_blank",class:"btn btn-sm btn-outline-primary m-1",href:s.$hostname+"en/filter/"+n.row.slug},[K,t("span",N,d(s.$t("english")),1)],8,D),i(t("button",{onClick:h(x=>l.editProduct(n.row.id),["prevent"]),class:"btn btn-sm btn-outline-dark m-1"},O,8,z),[[r,a.user.role.product.edit]]),i(t("button",{onClick:h(x=>l.deleteProduct(n.row.id),["prevent"]),class:"btn btn-sm btn-outline-danger m-1"},R,8,G),[[r,a.user.role.product.delete]])])):H("",!0)]),_:1},8,["columns","rows","pagination-options","search-options"])],512),[[r,a.user.role.product.show]])]),(p(),v(w,{to:".product-fa"},[Q])),(p(),v(w,{to:".product-gb"},[W])),t("div",X,[t("div",Y,d(s.$t("add-success-message")),1)]),t("button",Z,null,512),t("div",tt,[t("div",et,[t("div",st,[t("div",ot,[t("h2",nt,d(s.$t("add-new-product")),1)]),t("form",{onSubmit:e[6]||(e[6]=h(()=>{},["prevent"]))},[t("input",{type:"hidden",name:"_token",value:o.csrf},null,8,it),t("div",dt,[t("div",lt,[t("div",at,[rt,i(t("input",{onKeyup:e[0]||(e[0]=m((...n)=>l.addProduct&&l.addProduct(...n),["enter"])),type:"text",class:"form-control",placeholder:s.$t("name-product"),"onUpdate:modelValue":e[1]||(e[1]=n=>o.product.nameFa=n)},null,40,ct),[[u,o.product.nameFa]])])]),t("div",ut,[t("div",pt,[i(t("input",{onKeyup:e[2]||(e[2]=m((...n)=>l.addProduct&&l.addProduct(...n),["enter"])),type:"text",dir:"ltr",class:"form-control text-left",placeholder:s.$t("product-name","en"),"onUpdate:modelValue":e[3]||(e[3]=n=>o.product.nameEn=n)},null,40,ht),[[u,o.product.nameEn]]),mt])]),t("div",ft,[t("div",gt,[i(t("input",{dir:"ltr",type:"text",class:"form-control text-left",placeholder:s.$t("link"),"onUpdate:modelValue":e[4]||(e[4]=n=>o.product.slug=n)},null,8,_t),[[u,o.product.slug]]),t("div",vt,d(s.$hostname+"{language}/filter/"),1)])]),i(t("div",bt,[wt,f(" "+d(s.$t("error-empty-fields")),1)],512),[[r,o.error]])]),t("div",kt,[t("button",yt,d(s.$t("cancel")),1),t("button",{type:"button",onClick:e[5]||(e[5]=n=>l.addProduct()),class:"btn btn-success w-20",disabled:o.sendLoad},[i(t("div",null,d(s.$t("send")),513),[[r,!o.sendLoad]]),i(t("div",null,$t,512),[[r,o.sendLoad]])],8,xt)])],32)])])]),t("a",Lt,null,512),t("div",Ct,[t("div",Et,[t("div",Vt,[t("div",Ht,[t("h2",Ft,d(s.$t("edit-product")),1)]),t("form",{onSubmit:e[14]||(e[14]=h(n=>l.updateProduct(o.productId),["prevent"]))},[t("input",{type:"hidden",name:"_token",value:o.csrf},null,8,Bt),t("div",Mt,[t("div",Tt,[t("div",jt,[St,i(t("input",{onKeyup:e[7]||(e[7]=m(n=>l.updateProduct(o.productId),["enter"])),type:"text",class:"form-control",placeholder:s.$t("name-product"),"onUpdate:modelValue":e[8]||(e[8]=n=>o.product.nameFa=n)},null,40,At),[[u,o.product.nameFa]])])]),t("div",It,[t("div",Ut,[i(t("input",{onKeyup:e[9]||(e[9]=m(n=>l.updateProduct(o.productId),["enter"])),type:"text",dir:"ltr",class:"form-control text-left",placeholder:s.$t("product-name","en"),"onUpdate:modelValue":e[10]||(e[10]=n=>o.product.nameEn=n)},null,40,Dt),[[u,o.product.nameEn]]),Kt])]),t("div",Nt,[t("div",zt,[i(t("input",{dir:"ltr",type:"text",class:"form-control text-left",placeholder:s.$t("link"),"onUpdate:modelValue":e[11]||(e[11]=n=>o.product.slug=n)},null,8,qt),[[u,o.product.slug]]),t("div",Ot,d(s.$hostname+"{language}/filter/"),1)])]),i(t("div",Gt,[Jt,f(" "+d(s.$t("error-empty-fields")),1)],512),[[r,o.error]])]),t("div",Rt,[t("button",{ref:"closeEditModal",onClick:e[12]||(e[12]=n=>{o.product.nameEn="",o.product.nameFa="",o.product.slug=""}),type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-20 mx-4"},d(s.$t("cancel")),513),t("button",{type:"button",onClick:e[13]||(e[13]=n=>l.updateProduct(o.productId)),class:"btn btn-success w-20",disabled:!o.editLoad},[i(t("div",null,d(s.$t("edit")),513),[[r,o.editLoad]]),i(t("div",null,Xt,512),[[r,!o.editLoad]])],8,Qt)])],32)])])])],64)}const ee=P(F,[["render",Yt]]);export{ee as default};
