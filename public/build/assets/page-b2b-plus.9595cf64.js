import{_,h as y,i as v,j as h,o as w,c as D,b as g,d as $,w as n,v as r,a as t,e as d,t as i,n as m,q as f,r as u}from"./app.c6c6a3cb.js";import{Q as E}from"./vue-quill.esm-bundler.7c8d11ac.js";/* empty css                       */const x={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":y(()=>v(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),QuillEditor:E},data(){return{error:!1,page:{id:2,image:"",fa:{body:"",seoDescription:""},en:{body:"",seoDescription:""}}}},methods:{onChangeImage(){this.page.image=this.$refs.image.files[0]},updatePage(){if(this.page.slug!=""){this.$emit("loading"),this.error=!1,this.page.fa.body=this.$refs.myEditorFa.getHTML(),this.page.en.body=this.$refs.myEditorEn.getHTML();let e=new FormData;e.append("api_token",this.$cookies.get("user").token),e.append("id",this.page.id),e.append("images",this.page.image),e.append("body_fa",this.page.fa.body),e.append("body_en",this.page.en.body),e.append("description_fa",this.page.fa.seoDescription),e.append("description_en",this.page.en.seoDescription),h.post("/page/special/update",e,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{s.data.status==200&&(this.$router.push({name:"adminPages"}),this.$emit("loadingHide"))}).catch(s=>{this.$emit("loadingHide")})}else this.error=!0}},created(){h.get("/page/special/"+this.page.id,{params:{api_token:this.$cookies.get("user").token}}).then(e=>{this.page.id=e.data.data.id,e.data.data.images&&(this.page.image=this.$hostname+"upload/page/"+e.data.data.images),this.$refs.myEditorFa.setHTML(e.data.data.bodyFa),this.$refs.myEditorEn.setHTML(e.data.data.bodyEn),this.page.fa.seoDescription=e.data.data.seoDescriptionFa,this.page.en.seoDescription=e.data.data.seoDescriptionEn,this.$emit("loadingHide")}).catch(e=>{this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(e,s){document.title=this.$t("edit")+" "+this.$t("page")+" "+this.$t("b2b-plus")+" | "+this.$t("adminTitlePage")}}}},k={class:"content"},C={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},H=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),T={class:"pos intro-y grid grid-cols-12 gap-5 mt-5"},P={class:"intro-y col-span-12 lg:col-span-9"},j={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 mb-4 bg-white",role:"alert"},B=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),F={class:"post intro-y overflow-hidden box mt-5"},V={class:"post__tabs nav nav-tabs flex-col sm:flex-row bg-gray-300 dark:bg-dark-2 text-gray-600",role:"tablist"},L=["title"],M=t("i",{class:"fi fi-ir ml-2"},null,-1),I=["title"],Q=t("i",{class:"fi fi-us ml-2"},null,-1),U={class:"post__content tab-content"},A={id:"content",class:"tab-pane p-5 active",role:"tabpanel"},N=t("hr",{class:"my-4"},null,-1),O={for:"desc"},S=["placeholder"],q={id:"meta-title",role:"tabpanel",class:"tab-pane p-5"},z=t("hr",{class:"my-4"},null,-1),R={for:"desc"},G=["placeholder"],J={class:"intro-y col-span-12 lg:col-span-3 text-left"},K={class:"box p-2 text-right mt-5"},W={class:"bg-light-2 p-2 font-bold rounded mb-2"},X=["src"];function Y(e,s,l,Z,a,p){const b=u("header-admin"),c=u("QuillEditor");return w(),D("div",k,[g(b,{user:l.user,title:e.$t("edit")+" "+e.$t("page")+" "+e.$t("b2b-plus")},{default:$(()=>[n(t("button",{class:"btn border-0 btn-green",onClick:s[0]||(s[0]=o=>p.updatePage())},[t("span",null,i(e.$t("update")),1)],512),[[r,l.user.role.page.edit]])]),_:1},8,["user","title"]),n(t("div",C,[H,d(" "+i(e.$t("access-message")),1)],512),[[r,!l.user.role.page.edit]]),n(t("div",null,[t("div",T,[t("div",P,[n(t("div",j,[B,d(" "+i(e.$t("error-empty-page-fields")),1)],512),[[r,a.error]]),t("div",F,[t("div",V,[t("a",{title:e.$t("body"),"data-toggle":"tab","data-target":"#content",href:"javascript:;",class:"tooltip w-full sm:w-40 py-4 text-center flex justify-center items-center active",id:"content-tab",role:"tab"},[M,d(" "+i(e.$t("persian")),1)],8,L),t("a",{title:e.$t("seo-tools"),"data-toggle":"tab","data-target":"#meta-title",href:"javascript:;",class:"tooltip w-full sm:w-40 py-4 text-center flex justify-center items-center",id:"meta-title-tab",role:"tab"},[Q,d(" "+i(e.$t("english")),1)],8,I)]),t("div",U,[t("div",A,[g(c,{content:a.page.fa.body,"onUpdate:content":s[1]||(s[1]=o=>a.page.fa.body=o),theme:"snow",toolbar:"full",ref:"myEditorFa"},null,8,["content"]),N,t("label",O,i(e.$t("descriptions")+" "+e.$t("seo")),1),t("span",{class:m(["mx-2 px-2 rounded-full bg-theme-21 text-xs text-white",a.page.fa.seoDescription.length<160?"bg-theme-":"bg-theme-20"])},i(a.page.fa.seoDescription.length),3),n(t("textarea",{id:"desc",class:"form-control mt-3",rows:"3",placeholder:e.$t("descriptions")+" "+e.$t("seo"),"onUpdate:modelValue":s[2]||(s[2]=o=>a.page.fa.seoDescription=o),maxlength:"170"},`\r
                            `,8,S),[[f,a.page.fa.seoDescription]])]),t("div",q,[g(c,{content:a.page.en.body,"onUpdate:content":s[3]||(s[3]=o=>a.page.en.body=o),theme:"snow",toolbar:"full",ref:"myEditorEn"},null,8,["content"]),z,t("label",R,i(e.$t("descriptions")+" "+e.$t("seo")),1),t("span",{class:m(["mx-2 px-2 rounded-full bg-theme-21 text-xs text-white",a.page.en.seoDescription.length<160?"bg-theme-":"bg-theme-20"])},i(a.page.en.seoDescription.length),3),n(t("textarea",{id:"desc",class:"form-control mt-3",rows:"3",placeholder:e.$t("descriptions")+" "+e.$t("seo"),"onUpdate:modelValue":s[4]||(s[4]=o=>a.page.en.seoDescription=o),maxlength:"170"},`\r
                            `,8,G),[[f,a.page.en.seoDescription]])])])])]),t("div",J,[t("div",K,[t("p",W,i(e.$t("post-image")),1),t("img",{class:"rounded mb-2",src:a.page.image==null||a.page.image.name?"":a.page.image},null,8,X),t("input",{type:"file",ref:"image",onChange:s[5]||(s[5]=(...o)=>p.onChangeImage&&p.onChangeImage(...o))},null,544)])])])],512),[[r,l.user.role.page.edit]])])}const ae=_(x,[["render",Y]]);export{ae as default};
