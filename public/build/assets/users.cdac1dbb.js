import{_ as w,h as $,i as k,V as x,j as h,o as r,c,a as e,b as m,w as l,v as d,e as y,t as s,d as C,m as p,u as f,F as L,r as _,l as v}from"./app.c6c6a3cb.js";const V={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":$(()=>k(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),VueGoodTable:x},data(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),loading:!0,account:{id:"",name:"",role:"",active:""},editLoad:!1,columns:[{label:this.$t("name"),field:"name"},{label:this.$t("phone"),field:"phone"},{label:this.$t("email"),field:"email"},{label:this.$t("information"),field:"info"},{label:this.$t("the-operation"),field:"after"}],users:[]}},methods:{editUser(t){this.$refs.editModal.click(),this.users.map(o=>{o.id==t&&(this.account.id=t,this.account.name=o.name,this.account.role=o.role,this.account.active=o.active)})},updateUser(){this.$emit("loading");const t={api_token:this.$cookies.get("user").token,id:this.account.id,active:this.account.active,role:this.account.role};h.put("/user/update",t).then(o=>{o.data=="successfully updated"&&(this.users=this.users.map(i=>(i.id==this.account.id&&(i.active=this.account.active,i.role=this.account.role),i)),this.$refs.closeEditModal.click(),this.$emit("loadingHide"))}).catch(()=>{this.$emit("loadingHide")})}},beforeCreate(){h.get("/users/all",{params:{api_token:this.$cookies.get("user").token}}).then(t=>{if(t!=null)for(const o of t.data.data)this.users.push({id:o.id,name:o.name,phone:o.phone,email:o.email,active:o.active,role:o.role,step:o.step,time:o.time});this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(t,o){document.title=this.$t("users")+" | "+this.$t("adminTitlePage")}}}},M={class:"content"},E={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},H=e("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),P={class:"box intro-y"},U={key:0},j={class:"py-1 px-2 mx-1 rounded-full text-xs bg-theme-1 text-white font-medium"},B={class:"py-1 px-2 mx-1 rounded-full text-xs bg-theme-21 text-white font-medium"},S={class:"py-1 px-2 mx-1 rounded-full text-xs bg-theme-20 text-white font-medium"},A={class:"py-1 px-2 mx-1 rounded-full text-xs bg-theme-26 text-white font-medium"},D=["textContent"],N=["textContent"],T=["textContent"],F=["textContent"],O={key:1},q=["onClick"],z=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit w-4 h-4"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),G=[z],I={href:"javascript:;","data-toggle":"modal",ref:"editModal","data-target":"#modaledit",class:"d-none"},R={id:"modaledit",class:"modal",tabindex:"-1"},J={class:"modal-dialog"},K={class:"modal-content"},Q={class:"modal-header"},W={class:"font-bold ml-auto"},X={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},Y={class:"col-span-12 sm:col-span-12"},Z={value:"user"},ee={value:"admin"},te={class:"col-span-12 sm:col-span-12"},oe={value:"1"},se={value:"0"},ne={class:"modal-footer justify-end flex items-center"},ae=["disabled"],ie=e("i",{"data-loading-icon":"puff",class:"w-5"},null,-1),le=[ie];function de(t,o,i,re,a,u){const b=_("header-admin"),g=_("vue-good-table");return r(),c(L,null,[e("div",M,[m(b,{user:i.user,title:t.$t("users")},null,8,["user","title"]),l(e("div",E,[H,y(" "+s(t.$t("access-message")),1)],512),[[d,!i.user.role.users.show]]),l(e("div",P,[m(g,{class:"p-2",columns:a.columns,rows:a.users,rtl:!0,theme:"polar-bear","line-numbers":!0,"fixed-header":!0,"pagination-options":{enabled:!0,mode:"records",perPage:10,nextLabel:t.$t("next"),prevLabel:t.$t("prev"),rowsPerPageLabel:"",ofLabel:t.$t("of"),allLabel:t.$t("all")},"search-options":{enabled:!0,placeholder:t.$t("search")}},{"table-row":C(n=>[n.column.field=="info"?(r(),c("div",U,[e("span",j,s(t.$t("sign-up-time")+": "+n.row.time),1),l(e("span",B,[e("span",null,s(t.$t("not-active")+" "),1)],512),[[d,n.row.active==0]]),l(e("span",S,[e("span",null,s(t.$t("active")+" "),1)],512),[[d,n.row.active==1]]),e("span",A,[e("span",{textContent:s(n.row.step=="one"?t.$t("step")+"1/3":"")},null,8,D),e("span",{textContent:s(n.row.step=="tow"?t.$t("step")+"2/3":"")},null,8,N),e("span",{textContent:s(n.row.step=="three"?t.$t("step")+"3/3":"")},null,8,T),e("span",{textContent:s(n.row.step=="four"?t.$t("done"):"")},null,8,F)])])):v("",!0),n.column.field=="after"?(r(),c("span",O,[l(e("button",{onClick:p(ce=>u.editUser(n.row.id),["prevent"]),class:"btn btn-sm btn-outline-dark m-1"},G,8,q),[[d,i.user.role.users.edit]])])):v("",!0)]),_:1},8,["columns","rows","pagination-options","search-options"])],512),[[d,i.user.role.users.show]])]),e("a",I,null,512),e("div",R,[e("div",J,[e("div",K,[e("div",Q,[e("h2",W,s(t.$t("edit")+" "+a.account.name),1)]),e("form",{onSubmit:o[3]||(o[3]=p(()=>{},["prevent"]))},[e("div",X,[e("div",Y,[e("span",null,s(t.$t("user-role")),1),l(e("select",{class:"form-control mt-2","onUpdate:modelValue":o[0]||(o[0]=n=>a.account.role=n)},[e("option",Z,s(t.$t("user")),1),e("option",ee,s(t.$t("admin")),1)],512),[[f,a.account.role]])]),e("div",te,[e("span",null,s(t.$t("user-account")),1),l(e("select",{class:"form-control mt-2","onUpdate:modelValue":o[1]||(o[1]=n=>a.account.active=n)},[e("option",oe,s(t.$t("active")),1),e("option",se,s(t.$t("not-active")),1)],512),[[f,a.account.active]])])]),e("div",ne,[e("button",{ref:"closeEditModal",type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-20 mx-4"},s(t.$t("cancel")),513),e("button",{type:"button",onClick:o[2]||(o[2]=n=>u.updateUser()),class:"btn btn-success w-20",disabled:a.editLoad},[l(e("div",null,s(t.$t("update")),513),[[d,!a.editLoad]]),l(e("div",null,le,512),[[d,a.editLoad]])],8,ae)])],32)])])])],64)}const he=w(V,[["render",de]]);export{he as default};
