import{_ as k,h as x,i as $,V as C,j as r,o as f,c,a as t,b as p,w as i,v as l,e as q,t as n,d as V,m as h,u as m,q as g,F as L,r as b,l as _}from"./app.c6c6a3cb.js";const j={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":x(()=>$(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),VueGoodTable:C},data(){return{loading:!0,columns:[{label:this.$t("type-form"),field:"type"},{label:this.$t("information"),field:"info"},{label:this.$t("the-operation"),field:"after"}],forms:[],form:{id:"",language:"",status:"",type:"",feedback:{text:"",companyId:""},contact:{name:"",email:"",subject:"",text:""},faq:{question:"",answer:""}},editLoad:!0}},methods:{deleteForm(o){confirm(this.$t("delete-message"))&&(this.$emit("loading"),r.delete("/form/delete/"+o,{params:{api_token:this.$cookies.get("user").token}}).then(e=>{e.data=="successfully deleted"&&(this.forms=this.forms.filter(d=>d.id!=o),this.$emit("loadingHide"))}).catch(()=>{this.$emit("loadingHide")}))},getForm(){r.get("/form",{params:{api_token:this.$cookies.get("user").token}}).then(o=>{this.forms=[];for(const e of o.data)this.forms.push({id:e.id,type:e.type,status:e.status,language:e.language,time:e.time})}).catch(()=>{this.forms=[]})},updateForm(){if(this.$emit("loading"),this.editLoad=!1,this.form.type=="faq")var o=this.form.faq;else var o=this.form.feedback;const e={api_token:this.$cookies.get("user").token,language:this.form.language,status:this.form.status,body:o};r.put("/form/update/"+this.form.id,e).then(()=>{this.getForm(),this.editLoad=!0,this.$refs.closeEditModal.click(),this.$emit("loadingHide")}).catch(()=>{this.editLoad=!0,this.$emit("loadingHide")})},manafeForm(o){this.$refs.editModal.click(),r.get("/form/"+o,{params:{api_token:this.$cookies.get("user").token}}).then(e=>{this.form.id=e.data.id,this.form.language=e.data.language,this.form.status=e.data.status,this.form.type=e.data.type,e.data.type=="faq"&&(this.form.faq.question=e.data.body.question,this.form.faq.answer=e.data.body.answer),e.data.type=="feedback"&&(this.form.feedback.text=e.data.body.text,this.form.feedback.companyId=e.data.body.companyId),e.data.type=="contact"&&(this.form.contact.name=e.data.body.name,this.form.contact.email=e.data.body.email,this.form.contact.subject=e.data.body.subject,this.form.contact.text=e.data.body.text)}).catch(()=>{this.$emit("loadingHide")})}},beforeCreate(){r.get("/form",{params:{api_token:this.$cookies.get("user").token}}).then(o=>{if(this.forms=[],o.data!="null")for(const e of o.data)this.forms.push({id:e.id,type:e.type,status:e.status,language:e.language,time:e.time});this.$emit("loadingHide")}).catch(()=>{this.forms=[],this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(o,e){document.title=this.$t("forms")+" | "+this.$t("adminTitlePage")}}}},F={class:"content"},H={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},M=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),U={class:"box intro-y"},E={key:0},P={class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-27 text-white"},B={key:1,class:"flex align-items-center"},T=["onClick"],D=["onClick"],I=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash w-4 h-4"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),N=[I],S={href:"javascript:;","data-toggle":"modal",ref:"editModal","data-target":"#modaledit",class:"d-none"},A={id:"modaledit",class:"modal",tabindex:"-1"},O={class:"modal-dialog"},G={class:"modal-content"},R={class:"modal-header"},z={class:"font-medium text-left ml-auto"},J={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},K={class:"col-span-12 sm:col-span-12"},Q={for:"status"},W={value:"publish"},X={value:"draft"},Y={for:"lang"},Z={value:"fa"},tt={value:"en"},et=["placeholder"],ot=["placeholder"],st={for:"status"},at={value:"publish"},nt={value:"draft"},it={for:"lang"},lt={value:"fa"},dt={value:"en"},rt=["placeholder"],mt=["textContent"],ut=["textContent"],ft=["textContent"],ct=["textContent"],ht={class:"modal-footer justify-end flex items-center"},gt={r:"",type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-20 mx-4"},pt=t("i",{"data-loading-icon":"puff",class:"w-5"},null,-1),bt=[pt];function _t(o,e,d,yt,a,u){const y=b("header-admin"),v=b("vue-good-table");return f(),c(L,null,[t("div",F,[p(y,{user:d.user,title:o.$t("forms")},null,8,["user","title"]),i(t("div",H,[M,q(" "+n(o.$t("access-message")),1)],512),[[l,!d.user.role.forms.show]]),i(t("div",U,[p(v,{class:"p-2",columns:a.columns,rows:a.forms,rtl:!0,theme:"polar-bear","line-numbers":!0,"fixed-header":!0,"pagination-options":{enabled:!0,mode:"records",perPage:10,nextLabel:o.$t("next"),prevLabel:o.$t("prev"),rowsPerPageLabel:"",ofLabel:o.$t("of"),allLabel:o.$t("all")},"search-options":{enabled:!0,placeholder:o.$t("search")}},{"table-row":V(s=>[s.column.field=="info"?(f(),c("div",E,[t("span",P,n(s.row.time),1),i(t("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-29 text-white"},n(o.$t("english")+" "),513),[[l,s.row.language=="en"&&s.row.type!="\u062A\u0645\u0627\u0633 \u0628\u0627 \u0645\u0627"]]),i(t("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-29 text-white"},n(o.$t("persian")+" "),513),[[l,s.row.language=="fa"]]),i(t("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-21 text-white"},n(o.$t("draft")+" "),513),[[l,s.row.status=="draft"&&s.row.type!="\u062A\u0645\u0627\u0633 \u0628\u0627 \u0645\u0627"]]),i(t("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-20 text-white"},n(o.$t("publish")+" "),513),[[l,s.row.status=="publish"&&s.row.type!="\u062A\u0645\u0627\u0633 \u0628\u0627 \u0645\u0627"]])])):_("",!0),s.column.field=="after"?(f(),c("span",B,[t("button",{onClick:h(w=>u.manafeForm(s.row.id),["prevent"]),class:"btn btn-sm btn-outline-dark m-1"},n(o.$t("management")),9,T),i(t("button",{onClick:h(w=>u.deleteForm(s.row.id),["prevent"]),class:"btn btn-sm btn-outline-danger m-1"},N,8,D),[[l,d.user.role.forms.delete]])])):_("",!0)]),_:1},8,["columns","rows","pagination-options","search-options"])],512),[[l,d.user.role.forms.show]])]),t("a",S,null,512),t("div",A,[t("div",O,[t("div",G,[t("div",R,[t("h2",z,n(o.$t("manage-form")),1)]),t("form",{onSubmit:e[8]||(e[8]=h(()=>{},["prevent"]))},[t("div",J,[t("div",K,[i(t("div",null,[t("label",Q,n(o.$t("status")),1),i(t("select",{id:"status","onUpdate:modelValue":e[0]||(e[0]=s=>a.form.status=s),class:"form-control mb-2"},[t("option",W,n(o.$t("publish")),1),t("option",X,n(o.$t("draft")),1)],512),[[m,a.form.status]]),t("label",Y,n(o.$t("language")),1),i(t("select",{id:"lang","onUpdate:modelValue":e[1]||(e[1]=s=>a.form.language=s),class:"form-control mb-2"},[t("option",Z,n(o.$t("persian")),1),t("option",tt,n(o.$t("english")),1)],512),[[m,a.form.language]]),i(t("textarea",{class:"form-control w-100","onUpdate:modelValue":e[2]||(e[2]=s=>a.form.faq.question=s),placeholder:o.$t("question")},null,8,et),[[g,a.form.faq.question]]),i(t("textarea",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=s=>a.form.faq.answer=s),placeholder:o.$t("answer")},null,8,ot),[[g,a.form.faq.answer]])],512),[[l,a.form.type=="faq"]]),i(t("div",null,[t("label",st,n(o.$t("status")),1),i(t("select",{id:"status","onUpdate:modelValue":e[4]||(e[4]=s=>a.form.status=s),class:"form-control mb-2"},[t("option",at,n(o.$t("publish")),1),t("option",nt,n(o.$t("draft")),1)],512),[[m,a.form.status]]),t("label",it,n(o.$t("language")),1),i(t("select",{id:"lang","onUpdate:modelValue":e[5]||(e[5]=s=>a.form.language=s),class:"form-control mb-2"},[t("option",lt,n(o.$t("persian")),1),t("option",dt,n(o.$t("english")),1)],512),[[m,a.form.language]]),i(t("textarea",{class:"form-control w-100","onUpdate:modelValue":e[6]||(e[6]=s=>a.form.feedback.text=s),placeholder:o.$t("text")},null,8,rt),[[g,a.form.feedback.text]])],512),[[l,a.form.type=="feedback"]]),i(t("div",null,[t("p",{textContent:n(o.$t("name")+": "+a.form.contact.name)},null,8,mt),t("p",{textContent:n(o.$t("email")+": "+a.form.contact.email)},null,8,ut),t("p",{textContent:n(o.$t("subject")+": "+a.form.contact.subject)},null,8,ft),t("p",{textContent:n(o.$t("text")+": "+a.form.contact.text)},null,8,ct)],512),[[l,a.form.type=="contact"]])])]),t("div",ht,[t("button",gt,n(o.$t("cancel")),1),i(t("button",{type:"button",onClick:e[7]||(e[7]=s=>u.updateForm()),class:"btn btn-success w-20"},[i(t("div",null,n(o.$t("ok")),513),[[l,a.editLoad]]),i(t("div",null,bt,512),[[l,!a.editLoad]])],512),[[l,a.form.type!="contact"]])])],32)])])])],64)}const wt=k(j,[["render",_t]]);export{wt as default};
