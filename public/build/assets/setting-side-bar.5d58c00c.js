import{_ as v,h as $,i as w,j as r,o as y,c as S,b as m,d as p,a as e,w as s,v as h,t as a,q as c,J as L,r as f,u as C}from"./app.c6c6a3cb.js";import{d as x}from"./vuedraggable.umd.16f25545.js";let g=0;const D={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":$(()=>w(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),draggable:x},data(){return{load:!1,sideBar:{id:3,image:"",link:"",data:[]},dragging:!1}},computed:{draggingInfo(){return this.dragging?"under drag":""}},methods:{removeAt(t){this.list.splice(t,1)},add:function(){g++,this.list.push({icon:"telegram",color:"",link:"",id:g})},onChangeLogoLight(){this.logoLight=this.$refs["logo-light"].files[0]},onChangeLogoDark(){this.logoDark=this.$refs["logo-dark"].files[0]},onChangeFavIcon(){this.favIcon=this.$refs["fav-icon"].files[0]},changeSetting(){this.load=!0;let t=new FormData;t.append("api_token",this.$cookies.get("user").token),t.append("title-fa",this.siteSetting.siteTitleFa),t.append("title-en",this.siteSetting.siteTitleEn),t.append("logo-light",this.logoLight),t.append("logo-dark",this.logoDark),t.append("fav-icon",this.favIcon),t.append("menu",JSON.stringify(this.list)),r.post("/sitesetting/update",t,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{i.data.status==200&&(this.getData(),this.load=!1)}).catch(i=>{this.load=!1})},getData(){r.get("/sitesetting",{params:{api_token:this.$cookies.get("user").token}}).then(t=>{if(t.data.status==204)this.errorLoadState=!0,this.errorLoadMessage=t.data.message;else{this.siteSetting.siteTitleFa=t.data.data.titleFa,this.siteSetting.siteTitleEn=t.data.data.titleEn,this.siteSetting.logoLight=this.$hostname+"upload/site/"+t.data.data.logoLight,this.siteSetting.logoDark=this.$hostname+"upload/site/"+t.data.data.logoDark,this.siteSetting.favIcon=this.$hostname+"upload/site/"+t.data.data.favIcon,this.siteSetting.updateTime=t.data.time;for(const i of t.data.menu)this.list.push({icon:i.icon,color:i.color,link:i.link}),g++}}).catch(t=>{})},deleteLogo(t){confirm(this.$t("delete-message"))&&(this.$emit("loading"),r.delete("/sitesetting/delete/"+t,{params:{api_token:this.$cookies.get("user").token}}).then(i=>{i.data.status==204?(this.errorLoadState=!0,this.errorLoadMessage=i.data.message):this.getData(),this.$emit("loadingHide")}).catch(i=>{}))}},beforeCreate(){r.get("/sitesetting",{params:{api_token:this.$cookies.get("user").token}}).then(t=>{if(t.data.status==204)this.errorLoadState=!0,this.errorLoadMessage=t.data.message;else{this.siteSetting.siteTitleFa=t.data.data.titleFa,this.siteSetting.siteTitleEn=t.data.data.titleEn,this.siteSetting.logoLight=this.$hostname+"upload/site/"+t.data.data.logoLight,this.siteSetting.logoDark=this.$hostname+"upload/site/"+t.data.data.logoDark,this.siteSetting.favIcon=this.$hostname+"upload/site/"+t.data.data.favIcon,this.siteSetting.updateTime=t.data.time;for(const i of t.data.data.menu)this.list.push({icon:i.icon,color:i.color,link:i.link}),g++}this.$emit("loadingHide")}).catch(t=>{this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(t,i){document.title=this.$t("setting")+" "+this.$t("side-bar")+" | "+this.$t("adminTitlePage")}}}},B={class:"content"},T={class:"col-span-12 mt-3 flex justify-between p-3 items-center"},E={class:"bg-gray-300 rounded p-2"},I=["src"],V={class:"col-span-4"},F=["placeholder"],U={class:"bg-white mt-1 p-3 rounded mx-1"},j={class:"flex content-between"},A=e("i",{class:"cursor-pointer handle"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-align-justify block mx-auto"},[e("line",{x1:"21",y1:"10",x2:"3",y2:"10"}),e("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),e("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),e("line",{x1:"21",y1:"18",x2:"3",y2:"18"})])],-1),M=["onClick"],H=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x block mx-auto"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),N=[H],O={class:"mx-2 font-bold"},P=["onUpdate:modelValue"],J={value:"telegram"},K={value:"whatsapp"},q={value:"facebook"},R={value:"linkedin"},z={value:"twitter"},G={value:"instagram"},Q={value:"aparat"},W=e("br",null,null,-1),X={class:"mx-2 font-bold"},Y=["onUpdate:modelValue"],Z=e("br",null,null,-1),tt={class:"mx-2 font-bold"},et=["onUpdate:modelValue"];function it(t,i,u,ot,n,l){const k=f("header-admin"),_=f("draggable");return y(),S("div",B,[m(k,{user:u.user,title:t.$t("setting")+" "+t.$t("side-bar")},{default:p(()=>[s(e("button",{type:"button",onClick:i[0]||(i[0]=o=>l.changeSetting()),class:"btn btn-sm font-bold btn-success w-20 ml-2"},[s(e("div",null,a(t.$t("edit")),513),[[h,!n.load]]),s(e("div",null," . . . ",512),[[h,n.load]])],512),[[h,u.user.role.settings.site]])]),_:1},8,["user","title"]),e("div",null,[e("div",T,[s(e("div",E,[e("img",{src:n.sideBar.image},null,8,I),e("button",{onClick:i[1]||(i[1]=o=>t.deleteImage()),class:"text-blue-500 font-bold w-full mt-3 btn btn-outline-dark"},a(t.$t("delete")+" "+t.$t("image")),1)],512),[[h,n.sideBar.image!=""]]),e("div",V,[e("input",{id:"logo-light",type:"file",class:"form-control",ref:"logo-light",onChange:i[2]||(i[2]=(...o)=>l.onChangeLogoLight&&l.onChangeLogoLight(...o))},null,544)])]),s(e("input",{onKeyup:i[3]||(i[3]=L(()=>{},["enter"])),type:"text",dir:"ltr",class:"form-control text-left",placeholder:t.$t("site-title","en"),"onUpdate:modelValue":i[4]||(i[4]=o=>n.sideBar.link=o)},null,40,F),[[c,n.sideBar.link]]),e("button",{class:"btn btn-sm btn-dark font-bold mb-2 mt-2",onClick:i[5]||(i[5]=(...o)=>l.add&&l.add(...o))},a(t.$t("add")+" "+t.$t("fix-meno")),1),m(_,{tag:"ul",list:t.list,class:"list-group",handle:".handle","item-key":"name"},{item:p(({element:o,index:b})=>[e("li",U,[e("div",j,[A,e("i",{class:"close cursor-pointer",onClick:d=>l.removeAt(b)},N,8,M)]),e("label",O,a(t.$t("icon")),1),s(e("select",{id:"","onUpdate:modelValue":d=>o.icon=d,class:"form-control mb-2"},[e("option",J,a(t.$t("telegram")),1),e("option",K,a(t.$t("whatsapp")),1),e("option",q,a(t.$t("facebook")),1),e("option",R,a(t.$t("linkedin")),1),e("option",z,a(t.$t("twitter")),1),e("option",G,a(t.$t("instagram")),1),e("option",Q,a(t.$t("aparat")),1)],8,P),[[C,o.icon]]),W,e("label",X,a(t.$t("color")),1),s(e("input",{type:"color",class:"form-control mb-2",style:{height:"50px"},"onUpdate:modelValue":d=>o.color=d},null,8,Y),[[c,o.color]]),Z,e("label",tt,a(t.$t("link")),1),s(e("input",{dir:"ltr",type:"text",class:"form-control","onUpdate:modelValue":d=>o.link=d},null,8,et),[[c,o.link]])])]),_:1},8,["list"])])])}const nt=v(D,[["render",it]]);export{nt as default};
