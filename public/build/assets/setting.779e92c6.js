import{_ as y,h as S,i as L,j as h,o as C,c as x,b as f,d as p,w as n,v as r,a as t,e as m,t as s,m as $,J as v,q as c,r as k,u as D}from"./app.c6c6a3cb.js";import{d as T}from"./vuedraggable.umd.16f25545.js";let u=0;const I={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":S(()=>L(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),draggable:T},data(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),errorLoadState:!1,load:!1,errorLoadMessage:"",siteSetting:{id:1,siteTitleFa:"",siteTitleEn:"",logoLight:"",logoDark:"",favIcon:"",updateTime:""},logoLight:"",logoDark:"",favIcon:"",dragging:!1,list:[]}},computed:{draggingInfo(){return this.dragging?"under drag":""}},methods:{removeAt(e){this.list.splice(e,1)},add:function(){u++,this.list.push({icon:"telegram",color:"",link:"",id:u})},onChangeLogoLight(){this.logoLight=this.$refs["logo-light"].files[0]},onChangeLogoDark(){this.logoDark=this.$refs["logo-dark"].files[0]},onChangeFavIcon(){this.favIcon=this.$refs["fav-icon"].files[0]},changeSetting(){this.load=!0;let e=new FormData;e.append("api_token",this.$cookies.get("user").token),e.append("title-fa",this.siteSetting.siteTitleFa),e.append("title-en",this.siteSetting.siteTitleEn),e.append("logo-light",this.logoLight),e.append("logo-dark",this.logoDark),e.append("fav-icon",this.favIcon),e.append("menu",JSON.stringify(this.list)),h.post("/sitesetting/update",e,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{o.data.status==200&&(this.getData(),this.load=!1)}).catch(o=>{this.load=!1})},getData(){h.get("/sitesetting",{params:{api_token:this.$cookies.get("user").token}}).then(e=>{if(e.data.status==204)this.errorLoadState=!0,this.errorLoadMessage=e.data.message;else{this.siteSetting.siteTitleFa=e.data.data.titleFa,this.siteSetting.siteTitleEn=e.data.data.titleEn,this.siteSetting.logoLight=this.$hostname+"upload/site/"+e.data.data.logoLight,this.siteSetting.logoDark=this.$hostname+"upload/site/"+e.data.data.logoDark,this.siteSetting.favIcon=this.$hostname+"upload/site/"+e.data.data.favIcon,this.siteSetting.updateTime=e.data.time;for(const o of e.data.menu)this.list.push({icon:o.icon,color:o.color,link:o.link}),u++}}).catch(e=>{})},deleteLogo(e){confirm(this.$t("delete-message"))&&(this.$emit("loading"),h.delete("/sitesetting/delete/"+e,{params:{api_token:this.$cookies.get("user").token}}).then(o=>{o.data.status==204?(this.errorLoadState=!0,this.errorLoadMessage=o.data.message):this.getData(),this.$emit("loadingHide")}).catch(o=>{}))}},beforeCreate(){h.get("/sitesetting",{params:{api_token:this.$cookies.get("user").token}}).then(e=>{if(e.data.status==204)this.errorLoadState=!0,this.errorLoadMessage=e.data.message;else{this.siteSetting.siteTitleFa=e.data.data.titleFa,this.siteSetting.siteTitleEn=e.data.data.titleEn,this.siteSetting.logoLight=this.$hostname+"upload/site/"+e.data.data.logoLight,this.siteSetting.logoDark=this.$hostname+"upload/site/"+e.data.data.logoDark,this.siteSetting.favIcon=this.$hostname+"upload/site/"+e.data.data.favIcon,this.siteSetting.updateTime=e.data.time;for(const o of e.data.data.menu)this.list.push({icon:o.icon,color:o.color,link:o.link}),u++}this.$emit("loadingHide")}).catch(e=>{this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(e,o){document.title=this.$t("site-settings")+" | "+this.$t("adminTitlePage")}}}},E={class:"content"},F={class:"alert alert-primary-soft show flex items-center mb-2",role:"alert"},V=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-alert-circle w-6 h-6 ml-2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),t("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1),M={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},U=t("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),j=["value"],B={class:"col-span-12 sm:col-span-12"},A={class:"input-group"},H=t("div",{id:"input-group-email",class:"input-group-text"},[t("span",{class:"fi fi-ir"})],-1),N=["placeholder"],K={class:"col-span-12 sm:col-span-12 mt-3"},O={class:"input-group"},P=["placeholder"],q=t("div",{id:"input-group-email",class:"input-group-text"},[t("span",{class:"fi fi-us"})],-1),J={class:"col-span-6 sm:col-span-12 mt-3 d-flex"},R={class:"col-span-4"},z={for:"logo-light"},G={class:"col-span-4 mt-3"},Q={for:"logo-dark"},W={class:"col-span-4 mt-3"},X={for:"fav-icon"},Y={class:"col-span-12 mt-3 flex justify-between p-3 items-center"},Z={class:"bg-gray-300 rounded p-2"},tt=["src"],et={class:"bg-gray-300 rounded p-2"},ot=["src"],it={class:"bg-gray-300 rounded p-2"},st=["src"],lt={class:"bg-white mt-1 p-3 rounded mx-1"},nt={class:"flex content-between"},at=t("i",{class:"cursor-pointer handle"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-align-justify block mx-auto"},[t("line",{x1:"21",y1:"10",x2:"3",y2:"10"}),t("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),t("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),t("line",{x1:"21",y1:"18",x2:"3",y2:"18"})])],-1),rt=["onClick"],dt=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x block mx-auto"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),gt=[dt],ht={class:"mx-2 font-bold"},ct=["onUpdate:modelValue"],ut={value:"telegram"},mt={value:"whatsapp"},ft={value:"facebook"},pt={value:"linkedin"},vt={value:"twitter"},kt={value:"instagram"},_t={value:"aparat"},bt=t("br",null,null,-1),wt={class:"mx-2 font-bold"},yt=["onUpdate:modelValue"],St=t("br",null,null,-1),Lt={class:"mx-2 font-bold"},Ct=["onUpdate:modelValue"];function xt(e,o,g,$t,l,a){const _=k("header-admin"),b=k("draggable");return C(),x("div",E,[f(_,{user:g.user,title:e.$t("site-settings")},{default:p(()=>[n(t("button",{type:"button",onClick:o[0]||(o[0]=i=>a.changeSetting()),class:"btn btn-sm font-bold btn-success w-20 ml-2"},[n(t("div",null,s(e.$t("edit")),513),[[r,!l.load]]),n(t("div",null," . . . ",512),[[r,l.load]])],512),[[r,g.user.role.settings.site]]),m(" "+s(e.$t("last-update")+": "+l.siteSetting.updateTime),1)]),_:1},8,["user","title"]),n(t("div",F,[V,m(" "+s(l.errorLoadMessage),1)],512),[[r,l.errorLoadState]]),n(t("div",M,[U,m(" "+s(e.$t("access-message")),1)],512),[[r,!g.user.role.settings.site]]),n(t("div",null,[t("form",{onSubmit:o[8]||(o[8]=$(()=>{},["prevent"]))},[t("input",{type:"hidden",name:"_token",value:l.csrf},null,8,j),t("div",B,[t("div",A,[H,n(t("input",{onKeyup:o[1]||(o[1]=v(()=>{},["enter"])),type:"text",class:"form-control",placeholder:e.$t("site-title"),"onUpdate:modelValue":o[2]||(o[2]=i=>l.siteSetting.siteTitleFa=i)},null,40,N),[[c,l.siteSetting.siteTitleFa]])])]),t("div",K,[t("div",O,[n(t("input",{onKeyup:o[3]||(o[3]=v(()=>{},["enter"])),type:"text",dir:"ltr",class:"form-control text-left",placeholder:e.$t("site-title","en"),"onUpdate:modelValue":o[4]||(o[4]=i=>l.siteSetting.siteTitleEn=i)},null,40,P),[[c,l.siteSetting.siteTitleEn]]),q])]),t("div",J,[t("div",R,[t("label",z,s(e.$t("logo-light")),1),t("input",{id:"logo-light",type:"file",class:"form-control",ref:"logo-light",onChange:o[5]||(o[5]=(...i)=>a.onChangeLogoLight&&a.onChangeLogoLight(...i))},null,544)]),t("div",G,[t("label",Q,s(e.$t("logo-dark")),1),t("input",{id:"logo-dark",type:"file",class:"form-control",ref:"logo-dark",onChange:o[6]||(o[6]=(...i)=>a.onChangeLogoDark&&a.onChangeLogoDark(...i))},null,544)]),t("div",W,[t("label",X,s(e.$t("fav-icon")),1),t("input",{id:"fav-icon",type:"file",class:"form-control",ref:"fav-icon",onChange:o[7]||(o[7]=(...i)=>a.onChangeFavIcon&&a.onChangeFavIcon(...i))},null,544)])])],32),t("div",Y,[n(t("div",Z,[t("img",{src:l.siteSetting.logoLight,alt:""},null,8,tt),t("button",{onClick:o[9]||(o[9]=i=>a.deleteLogo("light")),class:"text-blue-500 font-bold w-full mt-3 btn btn-outline-dark"},s(e.$t("delete")+" "+e.$t("logo-light")),1)],512),[[r,l.siteSetting.logoLight!=""]]),n(t("div",et,[t("img",{src:l.siteSetting.logoDark,alt:""},null,8,ot),t("button",{onClick:o[10]||(o[10]=i=>a.deleteLogo("dark")),class:"text-blue-500 font-bold w-full mt-3 btn btn-outline-dark"},s(e.$t("delete")+" "+e.$t("logo-dark")),1)],512),[[r,l.siteSetting.logoDark!=""]]),n(t("div",it,[t("img",{src:l.siteSetting.favIcon,alt:""},null,8,st),t("button",{onClick:o[11]||(o[11]=i=>a.deleteLogo("fav")),class:"text-blue-500 font-bold w-full mt-3 btn btn-outline-dark"},s(e.$t("delete")+" "+e.$t("fav-icon")),1)],512),[[r,l.siteSetting.favIcon!=""]])]),t("button",{class:"btn btn-sm btn-dark font-bold mb-2",onClick:o[12]||(o[12]=(...i)=>a.add&&a.add(...i))},s(e.$t("add")+" "+e.$t("fix-meno")),1),f(b,{tag:"ul",list:l.list,class:"list-group",handle:".handle","item-key":"name"},{item:p(({element:i,index:w})=>[t("li",lt,[t("div",nt,[at,t("i",{class:"close cursor-pointer",onClick:d=>a.removeAt(w)},gt,8,rt)]),t("label",ht,s(e.$t("icon")),1),n(t("select",{id:"","onUpdate:modelValue":d=>i.icon=d,class:"form-control mb-2"},[t("option",ut,s(e.$t("telegram")),1),t("option",mt,s(e.$t("whatsapp")),1),t("option",ft,s(e.$t("facebook")),1),t("option",pt,s(e.$t("linkedin")),1),t("option",vt,s(e.$t("twitter")),1),t("option",kt,s(e.$t("instagram")),1),t("option",_t,s(e.$t("aparat")),1)],8,ct),[[D,i.icon]]),bt,t("label",wt,s(e.$t("color")),1),n(t("input",{type:"color",class:"form-control mb-2",style:{height:"50px"},"onUpdate:modelValue":d=>i.color=d},null,8,yt),[[c,i.color]]),St,t("label",Lt,s(e.$t("link")),1),n(t("input",{dir:"ltr",type:"text",class:"form-control","onUpdate:modelValue":d=>i.link=d},null,8,Ct),[[c,i.link]])])]),_:1},8,["list"])],512),[[r,g.user.role.settings.site&&!l.errorLoadState]])])}const It=y(I,[["render",xt]]);export{It as default};
