import{_ as S,h as y,i as _,j as g,o as h,c as m,b as p,w as l,v as r,a as e,t as n,e as c,d as k,n as d,q as b,F as w,k as v,r as x}from"./app.c6c6a3cb.js";const L={props:{site:Object,user:Object},components:{siteHeader:y(()=>_(()=>import("./site-header.7b088332.js"),["assets/site-header.7b088332.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css","assets/site-header.1dc29b9e.css"])),panelSideBar:y(()=>_(()=>import("./side-bar-panel.a242bfef.js"),["assets/side-bar-panel.a242bfef.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"]))},emits:["getUser"],data(){return{language:this.$route.params.lang,show:"one",ticket:{subject:"",message:"",file:""},error:!1,isLoading:!1,tickets:[],ticketShow:{id:"",subject:"",status:"",user:"",userId:"",text:"",time:"",file:"",dialog:[]},answer:{text:"",file:""}}},methods:{updateTicket(){this.isLoading=!0;let s=new FormData;s.append("api_token",this.$cookies.get("user").token),s.append("userid",parseInt(this.$cookies.get("user").id)),s.append("text",this.answer.text),s.append("status","new"),s.append("ticket",this.ticketShow.id),s.append("file",this.answer.file),s.append("type","user"),g.post("/ticket/update",s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{i.data=="success"&&(this.answer.text="",this.answer.file="",this.ticketShow.id="",this.ticketShow.subject="",this.ticketShow.status="",this.ticketShow.user="",this.ticketShow.userId="",this.ticketShow.text="",this.ticketShow.time="",this.ticketShow.file="",this.ticketShow.dialog=[],this.getTicket())}).catch(()=>{}),this.show="one",this.isLoading=!1},onChangeDoc(){this.answer.file=this.$refs.document.files[0]},reset(){this.error=!1,this.ticket.subject="",this.ticket.message="",this.ticket.file="",this.show="one"},loginCheck(){return!!this.$cookies.isKey("user")},onChangeFile(){this.ticket.file=this.$refs.file.files[0]},checkFields(){var s=0;return this.ticket.subject==""&&(this.error=!0,s=1),this.ticket.message==""&&(this.error=!0,s=1),s!=1},submitForm(){if(this.checkFields()){this.isLoading=!0;let s=new FormData;s.append("api_token",this.$cookies.get("user").token),s.append("user_id",this.$cookies.get("user").id),s.append("subject",this.ticket.subject),s.append("message",this.ticket.message),s.append("file",this.ticket.file),g.post("/ticket/new",s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{i.data=="success"&&(this.show="one",this.ticket.subject="",this.ticket.message="",this.ticket.file="",this.getTicket()),this.isLoading=!1}).catch(i=>{this.isLoading=!1})}},showTicket(s){this.isLoading=!0,this.show="four",g.get("/ticket/single/"+s,{params:{api_token:this.$cookies.get("user").token,language:this.language}}).then(i=>{this.ticketShow.id=i.data.id,this.ticketShow.subject=i.data.subject,this.ticketShow.status=i.data.status,this.ticketShow.user=i.data.user,this.ticketShow.userId=i.data.userId,this.ticketShow.text=i.data.text,this.ticketShow.time=i.data.time,this.ticketShow.file=i.data.file!=null?this.$sitename+"upload/support/"+i.data.file:null,this.ticketShow.dialog=i.data.dialog,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},getTicket(){g.get("/ticket/"+this.$cookies.get("user").id,{params:{api_token:this.$cookies.get("user").token,id:this.$cookies.get("user").id,language:this.$route.params.lang}}).then(s=>{if(s.data&&(this.tickets=[],s.data!="null"))for(const i of s.data)this.tickets.push({id:i.id,subject:i.subject,status:i.status,text:i.text,file:i.file,time:i.time})}).catch(s=>{this.tickets=[]})}},async beforeCreate(){this.$cookies.isKey("user")&&await g.get("/ticket/"+this.$cookies.get("user").id,{params:{api_token:this.$cookies.get("user").token,id:this.$cookies.get("user").id,language:this.$route.params.lang}}).then(s=>{if(s.data&&(this.tickets=[],s.data!="null"))for(const i of s.data)this.tickets.push({id:i.id,subject:i.subject,status:i.status,text:i.text,file:i.file,time:i.time})}).catch(s=>{this.tickets=[]}),document.title=this.$t("support",this.language)+" | "+this.site.title}},T={class:"h-screen w-screen fixed flex items-center justify-center !z-50"},F=e("section",{class:"w-[200px] h-[100px] bg-dark-primary-trans p-5 rounded-2xl flex justify-center items-center blur-panel"},[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])],-1),D=[F],V={class:"w-3/4 md:w-full mx-auto my-4 flex flex-col items-center"},B={class:"my-2"},z={href:"https://wa.me/+989337813003",class:"w-40 bg-green-100 m-1 p-2 block border border-green-400 border-2 rounded-2xl text-center text-green-500"},E={href:"https://t.me/+989337813003",class:"w-40 bg-sky-100 m-1 p-2 block border border-sky-400 border-2 rounded-2xl text-center text-sky-500"},I={class:"flex pb-14"},A={class:"bg-dark-primary md:w-2/6 xl:w-1/6 min-h-[calc(100vh-140px)] hidden md:flex flex-wrap content-between"},P={class:"w-full px-2 md:px-7 md:w-4/6 xl:w-5/6"},H={class:"text-white px-6 py-2 mb-4 bg-red-500 md:flex justify-between items-center rounded-lg mt-2"},O={class:"flex items-center"},U=e("span",{class:"hidden md:flex text-xl mr-5 items-center"},[e("i",{class:"fe fe-compass"})],-1),N={class:"inline-block align-middle mr-2 md:mr-8 text-justify"},K={class:"capitalize"},M={class:"text-white px-6 py-2 mb-4 bg-red-500 md:flex justify-between items-center rounded-lg mt-2"},R={class:"flex items-center"},q=e("span",{class:"hidden md:flex text-xl mr-5 items-center"},[e("i",{class:"fe fe-compass"})],-1),G={class:"inline-block align-middle mr-2 md:mr-8 text-justify"},J={class:"capitalize"},Q={class:"text-white px-6 py-2 mb-4 bg-red-500 md:flex justify-between items-center rounded-lg mt-2"},W={class:"flex items-center"},X=e("span",{class:"hidden md:flex text-xl mr-5 items-center"},[e("i",{class:"fe fe-compass"})],-1),Y={class:"inline-block align-middle mr-2 md:mr-8 text-justify"},Z={class:"capitalize"},$={class:"w-full md:w-3/4 mx-auto space-y-2 py-2 py-2"},ee=["dir"],te=["dir"],se={class:"w-full flex justify-between items-center py-4"},ie={type:"button",class:"btn bg-white-primary px-4 py-2 text-dark-primary rounded-lg"},ne={for:"upload",class:"cursor-pointer"},oe={class:"bg-white-secondary rounded-full flex items-center px-1"},le=e("i",{class:"fe fe-x"},null,-1),re=[le],ae=["onClick"],ce={class:"block mb-2 md:mb-0"},ue={class:"justify-self-start"},de={class:"block mt-2 mb-2 md:mt-0 md:mb-0"},ge={class:"px-4 py-1 font-semibold text-sm bg-dark-primary text-white rounded-full shadow-sm justify-self-end"},he={class:"w-3/4 md:w-full mx-auto my-4 flex flex-col items-center"},me={class:"my-2"},pe={href:"https://wa.me/+989337813003",class:"w-40 bg-green-100 m-1 p-2 block border border-green-400 border-2 rounded-xl text-center text-green-500"},fe={href:"https://t.me/+989337813003",class:"w-40 bg-sky-100 m-1 p-2 block border border-sky-400 border-2 rounded-xl text-center text-sky-500"},ke={class:"w-full mx-auto my-4 flex flex-col items-center space-y-2"},be={class:"w-full"},we=["href"],xe={class:"bg-slate-200 p-2 rounded mt-2"},ye=["href"],_e={class:"w-full"},ve={class:"btn bg-white-primary px-4 py-2 text-dark-primary rounded-lg"},je={for:"document",class:"cursor-pointer"},Ce={class:"bg-white-secondary rounded-full flex items-center px-1"},Se=e("i",{class:"fe fe-x"},null,-1),Le=[Se];function Te(s,i,u,Fe,t,a){const j=x("siteHeader"),C=x("panelSideBar"),f=x("router-link");return h(),m(w,null,[p(j,{site:u.site,user:u.user},null,8,["site","user"]),l(e("div",T,D,512),[[r,t.isLoading]]),l(e("div",V,[e("span",B,n(s.$t("support-message",t.language)),1),e("a",z,n(s.$t("whatsapp",t.language)),1),e("a",E,n(s.$t("telegram",t.language)),1)],512),[[r,!a.loginCheck()]]),e("section",I,[e("aside",A,[p(C,{site:u.site,user:u.user},null,8,["site","user"])]),e("div",P,[l(e("div",null,[l(e("section",H,[e("div",O,[U,e("span",N,[e("b",K,n(s.$t("step",t.language))+" (1/3) :",1),c(" "+n(s.$t("step-one",t.language)),1)])]),p(f,{to:{name:"sitePanelCompany"},class:"rounded-lg animate-bounce bg-red-700 p-2 flex items-center justify-center text-center mt-2 md:mt-0"},{default:k(()=>[c(n(s.$t("company-step",t.language)),1)]),_:1})],512),[[r,u.user.step=="one"]]),l(e("section",M,[e("div",R,[q,e("span",G,[e("b",J,n(s.$t("step",t.language))+" (2/3) :",1),c(" "+n(s.$t("step-tow",t.language)),1)])]),p(f,{to:{name:"sitePanelAds"},class:"rounded-lg animate-bounce bg-red-700 p-2 flex items-center justify-center text-center mt-2 md:mt-0"},{default:k(()=>[c(n(s.$t("ad-step",t.language)),1)]),_:1})],512),[[r,u.user.step=="tow"]]),l(e("section",Q,[e("div",W,[X,e("span",Y,[e("b",Z,n(s.$t("step",t.language))+" (3/3) :",1),c(" "+n(s.$t("step-three",t.language)),1)])]),p(f,{to:{name:"siteFeedBack"},class:"rounded-lg animate-bounce bg-red-700 p-2 flex items-center justify-center text-center mt-2 md:mt-0"},{default:k(()=>[c(n(s.$t("feed-step",t.language)),1)]),_:1})],512),[[r,u.user.step=="three"]]),l(e("div",$,[e("section",null,[e("label",{class:d(["text-sm font-bold text-gray-700",t.error&&t.ticket.subject==""?"!text-red-600":""]),for:"subject"},n(s.$t("title",t.language)),3),l(e("input",{id:"subject","onUpdate:modelValue":i[0]||(i[0]=o=>t.ticket.subject=o),type:"text",dir:t.language=="fa"?"rtl":"ltr",class:d(["w-full border border-slate-300 rounded-lg p-2 focus:outline-none focus:ring focus:ring-gray-300 p-3 text-gray-400",t.error&&t.ticket.subject==""?"ring ring-red-400":""])},null,10,ee),[[b,t.ticket.subject]])]),e("section",null,[e("label",{class:d(["text-sm font-bold text-gray-700",t.error&&t.ticket.message==""?"!text-red-600":""]),for:"message"},n(s.$t("text",t.language)),3),l(e("textarea",{id:"message","onUpdate:modelValue":i[1]||(i[1]=o=>t.ticket.message=o),rows:"6",dir:t.language=="fa"?"rtl":"ltr",class:d(["w-full border border-slate-300 rounded-lg p-2 focus:outline-none focus:ring focus:ring-gray-300 p-3 text-gray-400",t.error&&t.ticket.message==""?"ring ring-red-400":""])},null,10,te),[[b,t.ticket.message]])]),e("input",{id:"upload",ref:"file",type:"file",style:{display:"none"},onChange:i[2]||(i[2]=(...o)=>a.onChangeFile&&a.onChangeFile(...o))},null,544),e("div",se,[e("button",{type:"button",class:"btn border border-solid border-gray-300 rounded-lg px-4 py-2 text-dark-primary",onClick:i[3]||(i[3]=o=>a.reset())},n(s.$t("cancel",t.language)),1),e("section",{class:d(["space-x-2 flex items-center",t.language=="fa"?"space-x-reverse":""])},[e("button",ie,[e("label",ne,n(s.$t("upload-file",t.language)),1),l(e("span",oe,[c(" ("+n(t.ticket.file.name)+") ",1),e("button",{type:"button",class:"flex items-center",onClick:i[4]||(i[4]=o=>{t.ticket.file="",s.$refs.file.value=null})},re)],512),[[r,t.ticket.file!=""]])]),e("button",{onClick:i[5]||(i[5]=o=>a.submitForm()),class:"btn bg-dark-primary rounded-lg px-4 py-2 text-white"},n(s.$t("submit",t.language)),1)],2)])],512),[[r,t.show=="tow"]])],512),[[r,a.loginCheck()]]),e("div",null,[(h(!0),m(w,null,v(t.tickets,o=>l((h(),m("div",{onClick:De=>a.showTicket(o.id),key:o.id,class:"border-2 border-slate-200 border-solid rounded-lg p-2 md:p-4 m-2 text-sm block md:grid grid-cols-4 place-items-center justify-items-stretch place-content-stretch shadow-md"},[e("strong",ce,n(o.subject),1),e("section",ue,[l(e("span",{class:"bg-purple-100 px-2 text-purple-500 rounded-xl"},n(s.$t("check",t.language)),513),[[r,o.status=="check"]]),l(e("span",{class:"bg-slate-100 px-2 text-slate-500 rounded-xl"},n(s.$t("answered",t.language)),513),[[r,o.status=="answered"]]),l(e("span",{class:"bg-orange-100 px-2 text-orange-500 rounded-xl"},n(s.$t("process",t.language)),513),[[r,o.status=="process"]]),l(e("span",{class:"bg-green-100 px-2 text-green-500 rounded-xl"},n(s.$t("new",t.language)),513),[[r,o.status=="new"]])]),e("span",de,n(s.$t("expire-at",t.language)+": "+o.time),1),e("button",ge,n(s.$t("view",t.language)),1)],8,ae)),[[r,t.show=="one"&&t.tickets[0]]])),128))]),l(e("div",he,[e("span",me,n(s.$t("support-message",t.language)),1),e("button",{onClick:i[6]||(i[6]=o=>t.show="tow"),class:"w-40 bg-red-100 m-1 p-2 block border border-red-400 border-2 rounded-xl text-center text-red-500"},n(s.$t("send-ticket",t.language)),1),e("a",pe,n(s.$t("whatsapp",t.language)),1),e("a",fe,n(s.$t("telegram",t.language)),1)],512),[[r,t.show=="one"&&a.loginCheck()]]),l(e("div",ke,[e("div",be,[e("strong",null,n(s.$t("subject",t.language))+" : "+n(t.ticketShow.subject),1),e("p",null,n(s.$t("text",t.language))+" : "+n(t.ticketShow.text),1),l(e("a",{href:t.ticketShow.file},n(s.$t("file")),9,we),[[r,t.ticketShow.file]]),(h(!0),m(w,null,v(t.ticketShow.dialog,o=>(h(),m("div",xe,[l(e("p",null,n(o.text),513),[[r,o.text]]),e("small",null,[c(n(o.time)+" - "+n(o.user)+" ",1),l(e("a",{href:this.$sitename+"upload/support/"+o.file}," - "+n(s.$t("file",t.language)),9,ye),[[r,o.file]])])]))),256))]),e("div",_e,[e("label",{class:d(["text-sm font-bold text-gray-700",t.error&&t.ticket.message==""?"!text-red-600":""]),for:"answer"},n(s.$t("text",t.language)),3),l(e("textarea",{id:"answer",class:"w-full border border-slate-300 rounded-lg p-2 focus:outline-none focus:ring focus:ring-gray-300 p-3 text-gray-400","onUpdate:modelValue":i[7]||(i[7]=o=>t.answer.text=o)},`\r
                    `,512),[[b,t.answer.text]])]),e("div",{class:d(["flex space-x-2 items-center",t.language=="fa"?"space-x-reverse":""])},[e("input",{id:"document",ref:"document",type:"file",style:{display:"none"},onChange:i[8]||(i[8]=(...o)=>a.onChangeDoc&&a.onChangeDoc(...o))},null,544),e("button",ve,[e("label",je,n(s.$t("upload-file",t.language)),1),l(e("span",Ce,[c(" ("+n(t.answer.file.name)+") ",1),e("button",{type:"button",class:"flex items-center",onClick:i[9]||(i[9]=o=>{t.answer.file="",s.$refs.document.value=null})},Le)],512),[[r,t.answer.file!=""]])]),l(e("button",{onClick:i[10]||(i[10]=o=>a.updateTicket()),class:"btn bg-dark-primary p-2 text-white-primary rounded-lg mx-2"},n(s.$t("answer",t.language)),513),[[r,t.answer.text.length>0||t.answer.file!=""]]),e("button",{onClick:i[11]||(i[11]=o=>{t.show="one",t.answer.text="",t.answer.file=""}),class:"btn border border-solid border-gray-300 rounded-lg px-4 py-2 text-dark-primary"},n(s.$t("cancel",t.language)),1)],2)],512),[[r,t.show=="four"]])])])],64)}const Be=S(L,[["render",Te]]);export{Be as default};
