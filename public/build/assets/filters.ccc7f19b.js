import{_ as E,h as $,i as C,V as F,j as c,o as h,c as g,a as e,b as v,w as l,v as d,e as _,t as r,d as H,N as b,m as u,q as m,J as p,F as V,r as w,l as T,T as k}from"./app.c6c6a3cb.js";const B={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":$(()=>C(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),VueGoodTable:F},data(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),loading:!0,filter:{nameFa:"",nameEn:""},filterId:"",sendLoad:!1,editLoad:!1,successState:!1,error:!1,columns:[{label:this.$t("name-filter"),field:"fa",thClass:"filter-fa"},{label:this.$t("name-filter"),field:"en",thClass:"filter-gb"},{label:this.$t("the-operation"),field:"after"}],filters:[]}},methods:{addfilter(){if(this.filter.nameFa!=""&&this.filter.nameEn!=""){this.sendLoad=!0,this.error=!1;const s={api_token:this.$cookies.get("user").token,filter:this.filter};c.post("/filter/create",s).then(t=>{t.data=="success"&&(this.filter.nameFa="",this.filter.nameEn="",this.successState=!0,this.sendLoad=!1,setTimeout(()=>this.successState=!1,2e3),this.$refs.toggleButton.click(),this.getAll())}).catch(()=>{this.$emit("loadingHide")})}else this.error=!0},deletefilter(s){confirm(this.$t("delete-message"))&&(this.$emit("loading"),c.delete("/filter/delete/"+s,{params:{api_token:this.$cookies.get("user").token}}).then(t=>{t.data=="successfully deleted"&&(this.filters=this.filters.filter(a=>a.id!=s),this.$emit("loadingHide"))}).catch(()=>{this.$emit("loadingHide")}))},editfilter(s){this.editLoad=!1,this.error=!1,this.$refs.editModal.click(),c.get("/filter/"+s,{params:{api_token:this.$cookies.get("user").token}}).then(t=>{this.filter.nameFa=t.data.name_fa,this.filter.nameEn=t.data.name_en,this.filterId=t.data.id,this.editLoad=!0}).catch(()=>{this.$emit("loadingHide")})},updatefilter(s){if(this.filter.nameFa!=""&&this.filter.nameEn!=""){this.$emit("loading"),this.error=!1;const t={api_token:this.$cookies.get("user").token,filter:this.filter};c.put("/filter/update/"+s,t).then(a=>{a.data=="successfully updated"&&(this.filters=this.filters.map(f=>(f.id==s&&(f.fa=this.filter.nameFa,f.en=this.filter.nameEn),f)),this.$refs.closeEditModal.click(),this.$emit("loadingHide"))}).catch(()=>{this.$emit("loadingHide")})}else this.error=!0},getAll(){this.filters=[],c.get("/filter",{params:{api_token:this.$cookies.get("user").token}}).then(s=>{for(const t of s.data.data)this.filters.push({id:t.id,fa:t.name_fa,en:t.name_en});this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})}},beforeCreate(){c.get("/filter",{params:{api_token:this.$cookies.get("user").token}}).then(s=>{for(const t of s.data.data)this.filters.push({id:t.id,fa:t.name_fa,en:t.name_en});this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(s,t){document.title=this.$t("filters")+" | "+this.$t("adminTitlePage")}}}},M={class:"content"},S={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},j=e("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),I={class:"box intro-y"},A={key:0},P=["onClick"],D=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit w-4 h-4"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),K=[D],N=["onClick"],U=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash w-4 h-4"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),q=[U],O=e("span",{class:"fi fi-ir float-right ml-2"},null,-1),z=e("span",{class:"fi fi-us float-right ml-2"},null,-1),G={id:"basic-non-sticky-notification-content",class:"toastify-content hidden flex flex-col sm:flex-row"},J={class:"font-medium"},R={id:"basic-non-sticky-notification-toggle",ref:"toggleButton",class:"d-none"},Q={id:"header-footer-modal-preview",class:"modal",tabindex:"-1"},W={class:"modal-dialog"},X={class:"modal-content"},Y={class:"modal-header"},Z={class:"font-medium text-left ml-auto"},ee=["value"],te={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},se={class:"col-span-12 sm:col-span-12"},ie={class:"input-group"},oe=e("div",{id:"input-group-email",class:"input-group-text"},[e("span",{class:"fi fi-ir"})],-1),le=["placeholder"],ne={class:"col-span-12 sm:col-span-12"},ae={class:"input-group"},de=["placeholder"],re=e("div",{id:"input-group-email",class:"input-group-text"},[e("span",{class:"fi fi-us"})],-1),ce={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12",role:"alert"},fe=e("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),he={class:"modal-footer justify-end flex items-center"},ue={type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-20 mx-4"},me=["disabled"],pe=e("i",{"data-loading-icon":"puff",class:"w-5"},null,-1),_e=[pe],ge={href:"javascript:;","data-toggle":"modal",ref:"editModal","data-target":"#modaledit",class:"d-none"},ve={id:"modaledit",class:"modal",tabindex:"-1"},be={class:"modal-dialog"},we={class:"modal-content"},ke={class:"modal-header"},ye={class:"font-medium text-left ml-auto"},xe=["value"],Le={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},Ee={class:"col-span-12 sm:col-span-12"},$e={class:"input-group"},Ce=e("div",{id:"input-group-email",class:"input-group-text"},[e("span",{class:"fi fi-ir"})],-1),Fe=["placeholder"],He={class:"col-span-12 sm:col-span-12"},Ve={class:"input-group"},Te=["placeholder"],Be=e("div",{id:"input-group-email",class:"input-group-text"},[e("span",{class:"fi fi-us"})],-1),Me={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12",role:"alert"},Se=e("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),je={class:"modal-footer justify-end flex items-center"},Ie=["disabled"],Ae=e("i",{"data-loading-icon":"puff",class:"w-5"},null,-1),Pe=[Ae];function De(s,t,a,f,i,n){const y=w("header-admin"),x=w("vue-good-table");return h(),g(V,null,[e("div",M,[v(y,{user:a.user,title:s.$t("filters"),element:a.user.role.tag.add,elementText:s.$t("add")},null,8,["user","title","element","elementText"]),l(e("div",S,[j,_(" "+r(s.$t("access-message")),1)],512),[[d,!a.user.role.tag.show]]),l(e("div",I,[v(x,{class:"p-2",columns:i.columns,rows:i.filters,rtl:!0,theme:"polar-bear","line-numbers":!0,"fixed-header":!0,"pagination-options":{enabled:!0,mode:"records",perPage:10,nextLabel:s.$t("next"),prevLabel:s.$t("prev"),rowsPerPageLabel:"",ofLabel:s.$t("of"),allLabel:s.$t("all")},"search-options":{enabled:!0,placeholder:s.$t("search")}},{"table-row":H(o=>[o.column.field=="after"?(h(),g("span",A,[l(e("button",{onClick:u(L=>n.editfilter(o.row.id),["prevent"]),class:"btn btn-sm btn-outline-dark m-1"},K,8,P),[[d,a.user.role.tag.edit]]),l(e("button",{onClick:u(L=>n.deletefilter(o.row.id),["prevent"]),class:"btn btn-sm btn-outline-danger m-1"},q,8,N),[[d,a.user.role.tag.delete]])])):T("",!0)]),_:1},8,["columns","rows","pagination-options","search-options"])],512),[[d,a.user.role.tag.show]])]),(h(),b(k,{to:".filter-fa"},[O])),(h(),b(k,{to:".filter-gb"},[z])),e("div",G,[e("div",J,r(s.$t("add-success-message")),1)]),e("button",R,null,512),e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("h2",Z,r(s.$t("add-new-filter")),1)]),e("form",{onSubmit:t[5]||(t[5]=u(()=>{},["prevent"]))},[e("input",{type:"hidden",name:"_token",value:i.csrf},null,8,ee),e("div",te,[e("div",se,[e("div",ie,[oe,l(e("input",{onKeyup:t[0]||(t[0]=p((...o)=>n.addfilter&&n.addfilter(...o),["enter"])),type:"text",class:"form-control",placeholder:s.$t("name-filter"),"onUpdate:modelValue":t[1]||(t[1]=o=>i.filter.nameFa=o)},null,40,le),[[m,i.filter.nameFa]])])]),e("div",ne,[e("div",ae,[l(e("input",{onKeyup:t[2]||(t[2]=p((...o)=>n.addfilter&&n.addfilter(...o),["enter"])),type:"text",dir:"ltr",class:"form-control text-left",placeholder:s.$t("name-filter","en"),"onUpdate:modelValue":t[3]||(t[3]=o=>i.filter.nameEn=o)},null,40,de),[[m,i.filter.nameEn]]),re])]),l(e("div",ce,[fe,_(" "+r(s.$t("error-empty-fields")),1)],512),[[d,i.error]])]),e("div",he,[e("button",ue,r(s.$t("cancel")),1),e("button",{type:"button",onClick:t[4]||(t[4]=o=>n.addfilter()),class:"btn btn-success w-20",disabled:i.sendLoad},[l(e("div",null,r(s.$t("send")),513),[[d,!i.sendLoad]]),l(e("div",null,_e,512),[[d,i.sendLoad]])],8,me)])],32)])])]),e("a",ge,null,512),e("div",ve,[e("div",be,[e("div",we,[e("div",ke,[e("h2",ye,r(s.$t("edit-filter")),1)]),e("form",{onSubmit:t[12]||(t[12]=u(o=>n.updatefilter(i.filterId),["prevent"]))},[e("input",{type:"hidden",name:"_token",value:i.csrf},null,8,xe),e("div",Le,[e("div",Ee,[e("div",$e,[Ce,l(e("input",{onKeyup:t[6]||(t[6]=p(o=>n.updatefilter(i.filterId),["enter"])),type:"text",class:"form-control",placeholder:s.$t("name-filter"),"onUpdate:modelValue":t[7]||(t[7]=o=>i.filter.nameFa=o)},null,40,Fe),[[m,i.filter.nameFa]])])]),e("div",He,[e("div",Ve,[l(e("input",{onKeyup:t[8]||(t[8]=p(o=>n.updatefilter(i.filterId),["enter"])),type:"text",dir:"ltr",class:"form-control text-left",placeholder:s.$t("filter-name","en"),"onUpdate:modelValue":t[9]||(t[9]=o=>i.filter.nameEn=o)},null,40,Te),[[m,i.filter.nameEn]]),Be])]),l(e("div",Me,[Se,_(" "+r(s.$t("error-empty-fields")),1)],512),[[d,i.error]])]),e("div",je,[e("button",{ref:"closeEditModal",onClick:t[10]||(t[10]=o=>{i.filter.nameEn="",i.filter.nameFa=""}),type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-20 mx-4"},r(s.$t("cancel")),513),e("button",{type:"button",onClick:t[11]||(t[11]=o=>n.updatefilter(i.filterId)),class:"btn btn-success w-20",disabled:!i.editLoad},[l(e("div",null,r(s.$t("edit")),513),[[d,i.editLoad]]),l(e("div",null,Pe,512),[[d,!i.editLoad]])],8,Ie)])],32)])])])],64)}const Ne=E(B,[["render",De]]);export{Ne as default};
