import{_ as S,h as y,i as b,R as L,j as g,o as p,c as h,b as c,a as t,w as i,v as r,t as n,n as m,m as T,s as V,q as v,d as P,l as O,F as $,k as j,r as f,e as _,p as I,g as E}from"./app.c6c6a3cb.js";const F={props:{site:Object,user:Object},components:{accountHeader:y(()=>b(()=>import("./account-header.5b9985a6.js"),["assets/account-header.5b9985a6.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),accountFooter:y(()=>b(()=>import("./account-footer.88d063a8.js"),["assets/account-footer.88d063a8.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),VueTelInput:L},emits:["getUser"],data(){return{isLoading:!1,loginState:"email",phone:"",email:"",step:1,code:"",bindProps:{validCharactersOnly:!0,ignoredCountries:["IL"],enabledCountryCode:!0,autoFormat:!1,inputOptions:{placeholder:this.$t("phone-input",this.$route.params.lang)}},country:null,messageAlert:[],countDown:120,placeHolderCode:this.$route.params.lang=="fa"?"tel98547":""}},methods:{countryChanged(e){this.country=e.dialCode},loginEmail(){if(this.emailCheck()){this.isLoading=!0;const e={type:"email",email:this.email};g.post("/login/code",e).then(s=>{s.data.status==200&&this.countDownTimer(),this.step=2,this.isLoading=!1}).catch(s=>{this.isLoading=!1;let l=this.$t("incorect-user",this.$route.params.lang,{data:this.$t("email",this.$route.params.lang)});this.messageAlert.push(l),setTimeout(()=>this.messageAlert=this.messageAlert.filter(u=>u!=l),4e3)})}},loginPhone(){if(this.phoneCheck()){this.isLoading=!0;const e={type:"phone",phone:this.country+this.phone};g.post("/login/code",e).then(s=>{s.data.status==200&&this.countDownTimer(),this.step=2,this.isLoading=!1}).catch(s=>{this.isLoading=!1;let l=this.$t("incorect-user",this.$route.params.lang,{data:this.$t("mobile",this.$route.params.lang)});this.messageAlert.push(l),setTimeout(()=>this.messageAlert=this.messageAlert.filter(u=>u!=l),4e3)})}},emailCheck(){var e=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(this.email.match(e))return!0;{let s=this.$t("email-check",this.$route.params.lang);return this.messageAlert.push(s),setTimeout(()=>this.messageAlert=this.messageAlert.filter(l=>l!=s),4e3),!1}},phoneCheck(){let e=this.$t("phone-error",this.$route.params.lang);return this.phone.length<10?(this.messageAlert.push(e),setTimeout(()=>this.messageAlert=this.messageAlert=this.messageAlert.filter(s=>s!=e),4e3),!1):(this.messageAlert=this.messageAlert.filter(s=>s!=e),!0)},countDownTimer(){this.countDown>0&&setTimeout(()=>{this.countDown-=1,this.countDownTimer()},1e3)},setCountDown(e){this.countDown=e},sentAgain(e){this.isLoading=!0;let s={type:e,email:this.email,phone:this.country+this.phone};g.post("/login/code",s).then(l=>{l.status==200&&(this.setCountDown(120),this.countDownTimer()),this.isLoading=!1}).catch(l=>{this.isLoading=!1})},authenticate(e){this.isLoading=!0;let s={email:this.email,phone:this.country+this.phone,code:this.code,type:e};g.post("/login/auth",s).then(l=>{if(l.data.status==200){this.$router.push({name:"sitePanel"});const u={id:l.data.data.id,token:l.data.data.token,role:l.data.data.role,session:"25j_7Sl6xDq2Kc3ym0fmrSSk2xV2XkUkX"};this.$cookies.set("user",u,"180d"),this.$emit("getUser")}else{let u=this.$t("not-valied",this.$route.params.lang);this.messageAlert.push(u),setTimeout(()=>this.messageAlert=this.messageAlert.filter(o=>o!=u),4e3)}this.isLoading=!1}).catch(l=>{this.isLoading=!1})}},watch:{$route:{immediate:!0,handler(e,s){document.title=this.$t("login",this.$route.params.lang)+" - "+this.$t("user-account",this.$route.params.lang)+" | "+document.title}}}},w=e=>(I("data-v-b6d8f656"),e=e(),E(),e),U={class:"md:flex justify-center py-5 w-full lg:w-4/5 xl:w-2/3 m-auto md:mt-10"},H={class:"w-full md:w-2/4 relative"},N={class:"blur-login"},R=w(()=>t("img",{class:"loader",src:"/images/loading.svg",alt:"loading"},null,-1)),z=[R],B={class:"w-full rounded-lg shadow-lg px-4 pb-10"},q={class:"font-bold text-xl"},G={dir:"ltr",class:"relative mt-5 flex w-full flex-wrap items-stretch"},M=w(()=>t("span",{class:"z-10 h-full font-normal absolute text-center bg-transparent rounded items-center justify-center w-10 px-5 py-3 text-slate-400"},[t("i",{class:"fe fe-mail text-xl"})],-1)),X=["placeholder"],K={class:"w-full rounded-lg shadow-lg p-10"},J={key:0,class:"py-5"},Q={class:"text-center text-red-700 text-xl bold"},W={key:1,class:"py-5"},Y={dir:"ltr",class:"relative flex w-full flex-wrap items-stretch"},Z=w(()=>t("span",{class:"z-10 h-full font-normal absolute text-center bg-transparent rounded items-center justify-center w-10 px-5 py-3 text-slate-400"},[t("i",{class:"fe fe-smartphone text-xl"})],-1)),ee=["placeholder"],te={class:"text-red-600 relative m-4"},se=w(()=>t("span",{class:"text-xl inline-block mx-2 align-middle"},[t("i",{class:"fe fe-bell"})],-1)),oe={class:"w-full md:w-1/2 text-sm"},le={class:"w-full sm:flex p-10"},ne={class:"w-full sm:w-1/2 flex justify-center"},ae=["src"],ie={class:"text-dark-primary"},re={class:"mt-2"},ue={class:"w-full sm:flex p-10 flex-row-reverse"},me={class:"w-full sm:w-1/2 flex justify-center"},de=["src"],pe={class:"text-dark-primary"},he={class:"mt-2"};function ge(e,s,l,u,o,d){const x=f("accountHeader"),k=f("vue-tel-input"),C=f("router-link"),A=f("accountFooter");return p(),h($,null,[c(x,{site:l.site},null,8,["site"]),t("div",U,[t("div",H,[i(t("div",N,z,512),[[r,o.isLoading]]),i(t("div",B,[t("h2",q,n(e.$t("welcome",e.$route.params.lang)+" - "+e.$t("forgot-password",e.$route.params.lang)),1),t("section",{class:m(["mt-5 space-x-2",e.$route.params.lang=="fa"?"space-x-reverse":""])},[t("button",{onClick:s[0]||(s[0]=a=>o.loginState="email"),class:m(["text-xs font-semibold inline-block py-1 px-2 rounded-lg text-blueGray-600 bg-gray-200 last:mr-0 mr-1 border-2",o.loginState=="email"?"border-slate-500":""])},n(e.$t("login-with-email",e.$route.params.lang)),3),t("button",{onClick:s[1]||(s[1]=a=>o.loginState="phone"),class:m(["text-xs font-semibold inline-block py-1 px-2 rounded-lg text-blueGray-600 bg-gray-200 last:mr-0 mr-1 border-2",o.loginState=="phone"?"border-slate-500":""])},n(e.$t("login-with-phone",e.$route.params.lang)),3)],2),t("form",{onSubmit:s[6]||(s[6]=T(()=>{},["prevent"]))},[i(c(k,V({dir:"ltr",modelValue:o.phone,"onUpdate:modelValue":s[2]||(s[2]=a=>o.phone=a),styleClasses:"p-2 border w-full mt-5 block w-full focus:text-sky-500",onCountryChanged:d.countryChanged,item:o.placeHolderCode},o.bindProps),null,16,["modelValue","onCountryChanged","item"]),[[r,o.loginState=="phone"]]),i(t("div",G,[M,i(t("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>o.email=a),dir:"ltr",type:"email",placeholder:e.$t("email",e.$route.params.lang),class:m([e.$route.params.lang=="fa"?"placeholder:text-right":"","py-3 placeholder-slate-400 w-full border border-slate-300 rounded-lg p-2 focus:outline-none focus:ring focus:ring-gray-300 p-3 text-gray-400 mb-2 pl-14"])},null,10,X),[[v,o.email]])],512),[[r,o.loginState=="email"]]),i(t("button",{onClick:s[4]||(s[4]=a=>d.loginEmail()),class:"bg-dark-primary text-white font-bold uppercase text-xs py-3 rounded-full outline-none my-5 w-full hover:bg-slate-500",type:"button"},n(e.$t("send",e.$route.params.lang)+" "+e.$t("code",e.$route.params.lang)),513),[[r,o.loginState=="email"]]),i(t("button",{onClick:s[5]||(s[5]=a=>d.loginPhone()),class:"bg-dark-primary text-white font-bold uppercase text-xs py-3 rounded-full outline-none my-5 w-full hover:bg-slate-500",type:"button"},n(e.$t("send",e.$route.params.lang)+" "+e.$t("code",e.$route.params.lang)),513),[[r,o.loginState=="phone"]])],32),t("span",null,n(e.$t("sign-up-now",e.$route.params.lang)+" "),1),c(C,{to:{name:"siteSignup"},class:"text-blue-500"},{default:P(()=>[_(n(e.$t("signup",e.$route.params.lang)+" "+e.$t("O-signup",e.$route.params.lang)),1)]),_:1})],512),[[r,o.step==1]]),i(t("div",K,[o.countDown>0?(p(),h("div",J,[t("p",Q,n(o.countDown+" "+e.$t("seconds",e.$route.params.lang)),1)])):o.countDown==0?(p(),h("div",W,[t("p",{onClick:s[7]||(s[7]=a=>d.sentAgain(o.phone!=""?"phone":"email")),class:"text-center text-slate-400",style:{cursor:"pointer"}},n(e.$t("sent-again-code",e.$route.params.lang)),1)])):O("",!0),t("p",null,n(e.$t("inter-code",e.$route.params.lang)),1),i(t("p",{class:"text-left mt-5 text-slate-400"},n(o.phone),513),[[r,o.phone!=""]]),i(t("p",{class:"text-left text-slate-400"},n(o.email),513),[[r,o.email!=""]]),t("div",Y,[Z,i(t("input",{dir:"ltr",type:"number","onUpdate:modelValue":s[8]||(s[8]=a=>o.code=a),placeholder:e.$t("submit-code",e.$route.params.lang),class:m([e.$route.params.lang=="fa"?"placeholder:text-right":"","py-3 placeholder-slate-400 w-full border border-slate-300 rounded-lg p-2 focus:outline-none focus:ring focus:ring-gray-300 p-3 text-gray-400 mb-2 pl-14"])},null,10,ee),[[v,o.code]])]),t("button",{onClick:s[9]||(s[9]=a=>d.authenticate(o.phone!=""?"phone":"email")),class:"bg-dark-primary text-white font-bold uppercase text-xs py-3 rounded-full outline-none my-5 w-full focus:ring focus:ring-slate-300",type:"button"},n(e.$t("authenticate",e.$route.params.lang)),1)],512),[[r,o.step==2]]),i(t("section",te,[(p(!0),h($,null,j(o.messageAlert,(a,D)=>(p(),h("strong",{class:"inline-block w-full align-middle bg-red-50 border-red-600 my-1 p-3 border-2 rounded-lg",key:D},[se,_(" "+n(a),1)]))),128))],512),[[r,o.messageAlert[0]]])]),t("div",oe,[t("section",le,[t("div",ne,[t("img",{width:"300",class:"h-fit",src:e.$sitename+"images//login-right-img.png",alt:"login"},null,8,ae)]),t("div",{class:m(["w-full sm:w-1/2 mt-2 md:mt-0 text-center",e.$route.params.lang=="fa"?"sm:text-right":"sm:text-left"])},[t("strong",ie,n(e.$t("login-top-header",e.$route.params.lang)),1),t("p",re,n(e.$t("login-top-text",e.$route.params.lang)),1)],2)]),t("section",ue,[t("div",me,[t("img",{width:"300",class:"h-fit",src:e.$sitename+"images//login-left-img.png",alt:"login"},null,8,de)]),t("div",{class:m(["w-full sm:w-1/2 mt-2 md:mt-0 text-center",e.$route.params.lang=="fa"?"sm:text-right":"sm:text-left"])},[t("strong",pe,n(e.$t("login-bottom-header",e.$route.params.lang)),1),t("p",he,n(e.$t("login-bottom-text",e.$route.params.lang)),1)],2)])])]),c(A,{site:l.site},null,8,["site"])],64)}const fe=S(F,[["render",ge],["__scopeId","data-v-b6d8f656"]]);export{fe as default};
