import{_ as x,h as k,i as $,V,j as r,o as h,c,a as e,b,w as d,v as l,e as C,t as i,d as j,m as g,q as u,u as p,F as A,r as f,l as y}from"./app.c6c6a3cb.js";const H={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":k(()=>$(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),VueGoodTable:V},data(){return{columns:[{label:this.$t("title"),field:"title"},{label:this.$t("type"),field:"type"},{label:this.$t("expire-at"),field:"expire"},{label:this.$t("company-name"),field:"company"},{label:this.$t("information"),field:"info"},{label:this.$t("the-operation"),field:"after"}],ads:[],ad:{status:"",id:"",slug:null,language:"",type:"",body:{title:"",weight:"",tags:[],country:"",price:"",description:""},expire:""}}},methods:{deleteAds(s){confirm(this.$t("delete-message"))&&(this.$emit("loading"),r.delete("/advertise/delete/"+s,{params:{api_token:this.$cookies.get("user").token}}).then(t=>{t.data=="successfully deleted"&&(this.ads=this.ads.filter(n=>n.id!=s),this.$emit("loadingHide"))}).catch(()=>{this.$emit("loadingHide")}))},getAd(s){this.$refs.editModal.click(),r.get("/advertise/id/"+s,{params:{api_token:this.$cookies.get("user").token}}).then(t=>{this.ad.status=t.data.status,this.ad.id=t.data.id,this.ad.slug=t.data.slug,this.ad.type=t.data.type,this.ad.language=t.data.language,this.ad.body.title=t.data.body.title,this.ad.body.weight=t.data.body.weight,this.ad.body.country=t.data.body.country,this.ad.body.tags=t.data.body.tags,this.ad.body.price=t.data.body.price,this.ad.body.description=t.data.body.description}).catch(()=>{})},updateAd(){this.$emit("loading");const s={api_token:this.$cookies.get("user").token,id:this.ad.id,status:this.ad.status,slug:this.ad.slug,type:this.ad.type,language:this.ad.language,body:this.ad.body};r.put("/advertise/update/"+this.ad.id,s).then(()=>{this.getAds(),this.$refs.closeEditModal.click(),this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})},getAds(){this.ads=[],r.get("/advertise/get",{params:{api_token:this.$cookies.get("user").token}}).then(s=>{for(const t of s.data)this.ads.push({id:t.id,title:t.title,slug:t.slug,type:t.type,status:t.status,language:t.language,expire:t.expire,time:t.time,company:t.company.fa=="-"?t.company.en:t.company.fa,verified:t.company.verified}),this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})}},beforeCreate(){r.get("/advertise/get",{params:{api_token:this.$cookies.get("user").token}}).then(s=>{for(const t of s.data)this.ads.push({id:t.id,title:t.title,slug:t.slug,type:t.type,status:t.status,language:t.language,expire:t.expire,time:t.time,company:t.company.fa=="-"?t.company.en:t.company.fa,verified:t.company.verified}),this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})},name:"App",watch:{$route:{immediate:!0,handler(s,t){document.title=this.$t("ads")+" | "+this.$t("adminTitlePage")}}}},M={class:"content"},U={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},B=e("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1),E={class:"box intro-y"},L={key:0},P={class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-27 text-white"},T={key:1,class:"flex align-items-center"},D=["href"],N=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye block w-4 h-4"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1),S={class:"mr-2"},F=["onClick"],O=["onClick"],q=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash w-4 h-4"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),z=[q],G={href:"javascript:;","data-toggle":"modal",ref:"editModal","data-target":"#modaledit",class:"d-none"},I={id:"modaledit",class:"modal",tabindex:"-1"},R={class:"modal-dialog modal-lg"},J={class:"modal-content"},K={class:"modal-header"},Q={class:"font-medium text-left ml-auto"},W={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},X={class:"col-span-12 sm:col-span-12"},Y={class:"box p-2"},Z={class:"input-group intro-y"},tt=["placeholder"],et={id:"input-group-price",class:"input-group-text pb-0",dir:"ltr"},st={value:"active"},ot={value:"reject"},it={value:"draft"},at={value:"timeout"},dt={value:"deleted"},lt={value:"fa"},nt={value:"en"},rt={for:"type"},ut={value:"sale"},mt={value:"buy"},ht={for:"title"},ct=["dir"],gt={for:"description"},pt=["dir"],bt={for:"weight"},ft=["dir"],yt={for:"price"},wt=["dir"],_t={class:"modal-footer justify-end flex items-center"},vt={type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-20 mx-4"},xt=["disabled"];function kt(s,t,n,$t,a,m){const w=f("header-admin"),_=f("vue-good-table");return h(),c(A,null,[e("div",M,[b(w,{user:n.user,title:s.$t("ads")},null,8,["user","title"]),d(e("div",U,[B,C(" "+i(s.$t("access-message")),1)],512),[[l,!n.user.role.ads.show]]),d(e("div",E,[b(_,{class:"p-2",columns:a.columns,rows:a.ads,rtl:!0,theme:"polar-bear","line-numbers":!0,"fixed-header":!0,"pagination-options":{enabled:!0,mode:"records",perPage:10,nextLabel:s.$t("next"),prevLabel:s.$t("prev"),rowsPerPageLabel:"",ofLabel:s.$t("of"),allLabel:s.$t("all")},"search-options":{enabled:!0,placeholder:s.$t("search")}},{"table-row":j(o=>[o.column.field=="info"?(h(),c("div",L,[e("span",P,i(o.row.time),1),d(e("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-29 text-white"},i(s.$t("english")+" "),513),[[l,o.row.language=="en"]]),d(e("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-29 text-white"},i(s.$t("persian")+" "),513),[[l,o.row.language=="fa"]]),d(e("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-21 text-white"},i(s.$t("draft")+" "),513),[[l,o.row.status=="draft"]]),d(e("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-20 text-white"},i(s.$t("publish")+" "),513),[[l,o.row.status=="active"]]),d(e("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-1 text-white"},i(s.$t("reject")+" "),513),[[l,o.row.status=="reject"]]),d(e("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-1 text-white"},i(s.$t("timeout")+" "),513),[[l,o.row.status=="timeout"]]),d(e("span",{class:"my-1 px-2 mx-1 rounded-full text-xs bg-theme-1 text-white"},i(s.$t("user-deleted")+" "),513),[[l,o.row.status=="deleted"]])])):y("",!0),o.column.field=="after"?(h(),c("span",T,[d(e("a",{target:"_blank",class:"btn btn-sm btn-outline-primary m-1",href:s.$hostname+o.row.language+"/ads/"+o.row.slug},[N,e("span",S,i(s.$t("view")),1)],8,D),[[l,o.row.status=="active"||o.row.status=="timeout"]]),d(e("button",{onClick:g(v=>m.getAd(o.row.id),["prevent"]),class:"btn btn-sm btn-outline-dark m-1"},i(s.$t("management")),9,F),[[l,n.user.role.ads.edit]]),d(e("button",{onClick:g(v=>m.deleteAds(o.row.id),["prevent"]),class:"btn btn-sm btn-outline-danger m-1"},z,8,O),[[l,n.user.role.ads.delete]])])):y("",!0)]),_:1},8,["columns","rows","pagination-options","search-options"])],512),[[l,n.user.role.ads.show]])]),e("a",G,null,512),e("div",I,[e("div",R,[e("div",J,[e("div",K,[e("h2",Q,i(s.$t("manage-ads")),1)]),e("form",{onSubmit:t[9]||(t[9]=g(()=>{},["prevent"]))},[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[d(e("input",{dir:"ltr",id:"slug",type:"text",class:"form-control text-left",placeholder:s.$t("ad-slug"),"onUpdate:modelValue":t[0]||(t[0]=o=>a.ad.slug=o)},null,8,tt),[[u,a.ad.slug]]),e("div",et,i(s.$hostname+a.ad.language+"/ads/"),1)]),d(e("select",{id:"subject","onUpdate:modelValue":t[1]||(t[1]=o=>a.ad.status=o),class:"w-full form-control mt-2 mb-2"},[e("option",st,i(s.$t("publish")),1),e("option",ot,i(s.$t("reject")),1),e("option",it,i(s.$t("draft")),1),e("option",at,i(s.$t("timeout")),1),e("option",dt,i(s.$t("user-deleted")),1)],512),[[p,a.ad.status]]),d(e("select",{id:"language","onUpdate:modelValue":t[2]||(t[2]=o=>a.ad.language=o),class:"w-full form-control p-2 mt-2 mb-2"},[e("option",lt,i(s.$t("persian")),1),e("option",nt,i(s.$t("english")),1)],512),[[p,a.ad.language]]),e("label",rt,i(s.$t("type")),1),d(e("select",{id:"type","onUpdate:modelValue":t[3]||(t[3]=o=>a.ad.type=o),class:"w-full form-control mt-2 mb-2"},[e("option",ut,i(s.$t("sale")),1),e("option",mt,i(s.$t("buy")),1)],512),[[p,a.ad.type]]),e("label",ht,i(s.$t("title")),1),d(e("input",{dir:a.ad.language=="fa"?"rtl":"ltr",id:"title",type:"text",class:"form-control mt-2 mb-2","onUpdate:modelValue":t[4]||(t[4]=o=>a.ad.body.title=o)},null,8,ct),[[u,a.ad.body.title]]),e("label",gt,i(s.$t("description",s.language)),1),d(e("textarea",{id:"description",dir:a.ad.language=="fa"?"rtl":"ltr",class:"form-control mt-2 mb-2","onUpdate:modelValue":t[5]||(t[5]=o=>a.ad.body.description=o)},null,8,pt),[[u,a.ad.body.description]]),e("label",bt,i(s.$t("weight")),1),d(e("input",{dir:a.ad.language=="fa"?"rtl":"ltr",id:"weight",type:"text",class:"form-control mt-2 mb-2","onUpdate:modelValue":t[6]||(t[6]=o=>a.ad.body.weight=o)},null,8,ft),[[u,a.ad.body.weight]]),e("label",yt,i(s.$t("price")),1),d(e("input",{dir:a.ad.language=="fa"?"rtl":"ltr",id:"price",type:"text",class:"form-control mt-2 mb-2","onUpdate:modelValue":t[7]||(t[7]=o=>a.ad.body.price=o)},null,8,wt),[[u,a.ad.body.price]])])])]),e("div",_t,[e("button",vt,i(s.$t("cancel")),1),e("button",{type:"button",disabled:a.ad.slug==null,onClick:t[8]||(t[8]=o=>m.updateAd()),class:"btn btn-success w-20"},[e("div",null,i(s.$t("ok")),1)],8,xt)])],32)])])])],64)}const Ct=x(H,[["render",kt]]);export{Ct as default};
