import{_ as T,h as $,i as j,j as B,o as r,c,b as C,d as x,w as n,v as h,a as e,e as V,t as i,n as R,q as _,u as D,F as g,k as p,r as H,p as M,g as E}from"./app.c6c6a3cb.js";import{d as N}from"./vuedraggable.umd.16f25545.js";var f=0,v=0;const P={emits:["loadingHide","loading"],props:{loading:Boolean,user:Object},components:{"header-admin":$(()=>j(()=>import("./header-admin.6f180bbb.js"),["assets/header-admin.6f180bbb.js","assets/app.c6c6a3cb.js","assets/app.c39a63c1.css"])),draggable:N},data(){return{loading:!0,header:[],data:[],dragging:!1,table:{title:"",detail:{description:""},language:"all"},error:!1}},methods:{addHeader(){this.header.push({id:f,title:""}),f++},addRow(){this.data.push({col:[]})},addCol(t){this.data[t].col.push({id:v,title:""}),v++},removeRow(t){this.data=this.data.filter((l,o,m)=>o!==t)},removeCol(t,l){this.data[t].col=this.data[t].col.filter((o,m,s)=>m!==l)},removeHeader(t){this.header=this.header.filter((l,o,m)=>o!==t)},addTable(){if(this.table.title!=""&&this.table.key!=""){this.$emit("loading"),this.error=!1;const t={api_token:this.$cookies.get("user").token,title:this.table.title,detail:this.table.detail,language:this.table.language,header:this.header,data:this.data};B.post("/table/add",t).then(l=>{l.data=="success"&&(this.table.title="",this.table.language="all",this.header=[],this.data=[],this.table.detail.description="",f=0,v=0),this.$emit("loadingHide")}).catch(()=>{this.$emit("loadingHide")})}else this.error=!0}},computed:{draggingInfo(){return this.dragging?"under drag":""}},mounted(){this.$emit("loadingHide")},watch:{$route:{immediate:!0,handler(t,l){document.title=this.$t("tables")+" | "+this.$t("adminTitlePage")}}}},k=t=>(M("data-v-6827819e"),t=t(),E(),t),A={class:"content"},F={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 bg-white mt-2 font-bold",role:"alert"},L=k(()=>e("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1)),O={class:"box intro-y p-4"},q={class:"alert alert-outline-danger alert-dismissible show flex items-center col-span-12 mb-2",role:"alert"},z=k(()=>e("i",{"data-feather":"alert-octagon",class:"w-6 h-6 ml-2"},null,-1)),G=["placeholder"],J=["placeholder"],K={value:"all"},Q={value:"fa"},W={value:"en"},X={dir:"ltr"},Y={class:"mt-2"},Z={class:"float-left"},ee={class:"inline"},te=["onUpdate:modelValue"],le=["onClick"],ae={class:"bg-white py-2 rounded"},se={class:"flex align-items-center"},oe={class:"inline"},ne=["onUpdate:modelValue"],ie=["onClick"],de=["onClick"],re=["onClick"],ce=k(()=>e("button",{class:"btn handle"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-align-justify block mx-auto"},[e("line",{x1:"21",y1:"10",x2:"3",y2:"10"}),e("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),e("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),e("line",{x1:"21",y1:"18",x2:"3",y2:"18"})])],-1));function ue(t,l,o,m,s,d){const U=H("header-admin"),I=H("draggable");return r(),c("div",A,[C(U,{user:o.user,title:t.$t("create-table")},{default:x(()=>[n(e("button",{type:"button",onClick:l[0]||(l[0]=a=>d.addHeader()),class:"btn btn-sm font-bold btn-success ml-2"},i(t.$t("add-header")),513),[[h,o.user.role.table.add]]),n(e("button",{type:"button",onClick:l[1]||(l[1]=a=>d.addRow()),class:"btn btn-sm font-bold btn-success ml-2"},i(t.$t("add-data")),513),[[h,o.user.role.table.add]]),n(e("button",{type:"button",onClick:l[2]||(l[2]=a=>d.addTable()),class:"btn btn-sm font-bold btn-dark ml-2"},i(t.$t("submit")),513),[[h,o.user.role.table.add]])]),_:1},8,["user","title"]),n(e("div",F,[L,V(" "+i(t.$t("access-message")),1)],512),[[h,!o.user.role.table.add]]),n(e("div",O,[n(e("div",q,[z,V(" "+i(t.$t("error-empty-fields")),1)],512),[[h,s.error]]),n(e("input",{dir:"rtl",type:"text",class:R(["form-control",s.error&&s.table.title==""?"alert-outline-danger":""]),placeholder:t.$t("title"),"onUpdate:modelValue":l[3]||(l[3]=a=>s.table.title=a)},null,10,G),[[_,s.table.title]]),n(e("input",{dir:"ltr",type:"text",class:"form-control mt-2",placeholder:t.$t("description"),"onUpdate:modelValue":l[4]||(l[4]=a=>s.table.detail.description=a)},null,8,J),[[_,s.table.detail.description]]),n(e("select",{id:"lang",class:"form-control mt-2","onUpdate:modelValue":l[5]||(l[5]=a=>s.table.language=a)},[e("option",K,i(t.$t("all")),1),e("option",Q,i(t.$t("persian")),1),e("option",W,i(t.$t("english")),1)],512),[[D,s.table.language]]),e("div",X,[e("table",Y,[e("thead",Z,[e("tr",ee,[(r(!0),c(g,null,p(s.header,(a,b)=>(r(),c("th",null,[n(e("input",{type:"text","onUpdate:modelValue":u=>a.title=u,class:"border-2 p-2 rounded border-solid border-theme-15 font-bold"},null,8,te),[[_,a.title]]),e("button",{class:"btn btn-danger mx-1",onClick:u=>d.removeHeader(b)}," - ",8,le)]))),256))])]),e("tbody",null,[C(I,{tag:"ul",list:s.data,class:"list-group",handle:".handle","item-key":"name"},{item:x(({element:a,index:b})=>[e("li",ae,[e("tr",se,[(r(!0),c(g,null,p(a,u=>(r(),c("div",oe,[(r(!0),c(g,null,p(u,(y,S)=>(r(),c("td",null,[n(e("input",{type:"text","onUpdate:modelValue":w=>y.title=w,class:"border p-2 rounded"},null,8,ne),[[_,y.title]]),e("button",{class:"btn btn-danger mx-1",onClick:w=>d.removeCol(b,S)}," - ",8,ie)]))),256))]))),256)),e("button",{class:"btn btn-success mx-1",onClick:u=>d.addCol(b)}," + ",8,de),e("button",{class:"btn btn-dark mx-1",onClick:u=>d.removeRow(b)}," - ",8,re),ce])])]),_:1},8,["list"])])])])],512),[[h,o.user.role.table.add]])])}const me=T(P,[["render",ue],["__scopeId","data-v-6827819e"]]);export{me as default};
